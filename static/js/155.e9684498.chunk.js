"use strict";(self.webpackChunkchecks_cool=self.webpackChunkchecks_cool||[]).push([[155],{5186:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(885),i=n(7313),r=n(1378),s=n.n(r),o=(n(658),n(2632),n(1560)),c=n(6417),u=function(e){var t=(0,i.useState)(e.setStart||new Date),n=(0,a.Z)(t,2),r=n[0],u=n[1],l=(0,i.useState)(r),d=(0,a.Z)(l,2),f=d[0],v=d[1];(0,i.useEffect)((function(){"main"===e.about&&u(e.setStart)}),[e.setStart]);var m=i.forwardRef((function(e,t){var n=e.value,a=e.onClick;return(0,c.jsx)("button",{className:"custom-input",onClick:a,ref:t,children:n})}));return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s(),{selected:r,onChange:function(t){if("attendance"===e.about){var n=(0,a.Z)(t,2),i=n[0],r=n[1];u(i),v(r)}else u(t);e.getDateValue(t)},filterDate:function(e){var t=e.getDay(e);return 0!==t&&6!==t},startDate:r,endDate:"attendance"===e.about&&f,selectsRange:"attendance"===e.about&&!0,disabledKeyboardNavigation:!0,highlightDates:e.highlight,customInput:(0,c.jsx)(m,{}),inline:e.inline,locale:o.Z,dateFormat:"yy\ub144 MMMM d\uc77c(eee)"})})}},8429:function(e,t,n){n.d(t,{Z:function(){return O}});var a=n(885),i="Attendance_student__zQCyC",r="Attendance_form-section__SmTcW",s="Attendance_date__PNNb3",o="Attendance_closeBtn__E609D",c="Attendance_datepick-explain__LXpeq",u=n(3451),l=n(7313),d=n(5186),f=n(4165),v=n(1413),m=n(5861),p="AttendanceForm_form__d8p8O",h="AttendanceForm_btn__VV+7-",x="AttendanceForm_btnArea__eGu5D",_=n(4484),j=n(7114),g=n.n(j),Z="AttendanceOption_option__04AUt",b="AttendanceOption_option-select__5pc8P",y="AttendanceOption_ul__HzrL4",S=n(6417),N=function(e){var t,n=(0,l.useState)(""),i=(0,a.Z)(n,2),r=i[0],s=i[1],o=function(t){s(t.target.id+t.target.innerText),e.showNote(t.target.id+t.target.innerText)};return(0,S.jsx)("ul",{className:y,children:e.selectOption&&(null===(t=e.selectOption)||void 0===t?void 0:t.map((function(e){return(0,S.jsx)("li",{className:e.value===r?b:Z,id:e.id,onClick:o,children:e.class},e.id)})))})},w=n(5729),C=n(9532),k=n(573),F=function(e){var t=(0,l.useState)(""),n=(0,a.Z)(t,2),i=n[0],r=n[1],s=(0,l.useState)(""),o=(0,a.Z)(s,2),c=o[0],u=o[1],d=(0,l.useState)(!1),j=(0,a.Z)(d,2),Z=j[0],b=j[1],y=(0,l.useState)([]),F=(0,a.Z)(y,2),O=F[0],D=F[1],E=(0,l.useRef)(null);(0,l.useEffect)((function(){!function(){var t=(0,k.JU)(C.wO,"attend",e.userUid);(0,k.cf)(t,(function(e){var t,n;D([]);var a=[];null===e||void 0===e||null===(t=e.data())||void 0===t||null===(n=t.attend_data)||void 0===n||n.forEach((function(e){a.push(e)})),D([].concat(a))}))}()}),[]);var A=function(e){return e.getFullYear()+"-"+("0"+(1+e.getMonth())).slice(-2)+"-"+("0"+e.getDate()).slice(-2)},U=function(){var t=(0,m.Z)((0,f.Z)().mark((function t(n){var s,o,u,l,d,m,p,h,x,_,j,Z,y,S,N;return(0,f.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),s=document.getElementById("textArea").value,o=e.who.split(" "),u="","consulting"!==e.about){t.next=12;break}l=A(e.attendDate),w=e.attendDate,d=("0"+w.getHours()).slice(-2)+":"+("0"+w.getMinutes()).slice(-2),u=l+d+o[0],m={num:o[0],name:o[1],id:u,option:c,note:s,attachedFileUrl:i},e.addData(m),t.next=25;break;case 12:if("attendance"!==e.about){t.next=25;break}if(Array.isArray(e.attendDate)?(x=(0,a.Z)(e.attendDate,2),p=x[0],h=x[1]):(p=e.attendDate,h=e.attendDate),0!==p.getDay()&&6!==p.getDay()){t.next=17;break}return g().fire({icon:"error",title:"\uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694!",html:"\ud1a0 / \uc77c\uc694\uc77c\uc740 \uc800\uc7a5\uc774 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4. <br>\ub0a0\uc9dc\ub97c \ud655\uc778, \ubcc0\uacbd\ud574\uc8fc\uc138\uc694",confirmButtonText:"\ud655\uc778",confirmButtonColor:"#85bd82"}),t.abrupt("return");case 17:if(_={num:o[0],name:o[1],option:c,note:s},j=[],Z=p,p===h)y=A(p),u=y+o[0],j.push(u);else for(;Z<=h;)0===Z.getDay()||6===Z.getDay()||(S=A(Z),u=S+o[0],j.push(u)),Z.setDate(Z.getDate()+1);return N=JSON.parse(JSON.stringify(O)),j.forEach((function(e){0===(null===O||void 0===O?void 0:O.filter((function(t){return t.id===e}))).length&&N.push((0,v.Z)((0,v.Z)({},_),{},{id:e}))})),t.next=25,(0,k.pl)((0,k.JU)(C.wO,"attend",e.userUid),{attend_data:N});case 25:f="".concat(o[1]," \ud559\uc0dd\uc758 ").concat(c.slice(1)," \uc815\ubcf4\uac00 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \n(5\ucd08 \ud6c4 \ucc3d\uc774 \uc790\ub3d9\uc73c\ub85c \uc0ac\ub77c\uc9d1\ub2c8\ub2e4.)"),g().fire({icon:"success",title:"\uc800\uc7a5\ub418\uc5c8\uc5b4\uc694!",text:f,confirmButtonText:"\ud655\uc778",confirmButtonColor:"#85bd82",timer:5e3}),b(!1),r(""),e.onClose();case 29:case"end":return t.stop()}var f,w}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(N,{selectOption:e.selectOption,showNote:function(e){b(!0),u(e)}}),Z&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("form",{id:"area-form",className:p,onSubmit:U,children:(0,S.jsx)(_.Z,{ref:E,id:"textArea",className:"attendForm-input",label:"inputData",input:{type:"textarea",placeholder:"\ube44\uace0\ub97c \uc785\ub825\ud558\uc138\uc694.",autoFocus:!0},defaultValue:"",onInput:function(t){return function(t){var n;"consulting"===e.about?n=500:"attendance"===e.about&&(n=30),t.target.value.length>n&&(t.target.value=t.target.value.substr(0,n),g().fire({icon:"error",title:"\uc785\ub825 \ubd88\uac00",text:"\uc785\ub825\ud55c \ub0b4\uc6a9\uc744 \uc904\uc5ec\uc8fc\uc138\uc694.",confirmButtonText:"\ud655\uc778",confirmButtonColor:"#85bd82",timer:5e3}))}(t)}})}),(0,S.jsxs)("div",{className:x,children:[(0,S.jsx)(w.Z,{about:e.about,attachedFileHandler:function(e){r(e)}}),(0,S.jsx)("button",{className:h,onClick:U,children:"\uc800\uc7a5"})]})]})]})},O=function(e){var t=(0,l.useState)(new Date),n=(0,a.Z)(t,2),f=n[0],v=n[1];return(0,S.jsxs)(u.Z,{onClose:e.onClose,addStyle:"attendHeight",children:[(0,S.jsxs)("div",{className:i,children:[(0,S.jsxs)("span",{children:[" ",e.who," "]}),(0,S.jsx)("span",{className:o,onClick:e.onClose,children:(0,S.jsx)("i",{className:"fa-regular fa-circle-xmark"})})]}),(0,S.jsxs)("div",{className:s,children:[" ",(0,S.jsx)(d.Z,{getDateValue:function(e){v(e)},about:e.about,isSubject:e.isSubject})]}),(0,S.jsx)("div",{className:c,children:"attendance"===e.about&&"*\uc2dc\uc791 \ub0a0\uc9dc\uc640 \ub05d \ub0a0\uc9dc\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694!"}),(0,S.jsx)("div",{className:r,children:(0,S.jsx)(F,{id:e.id,selectOption:e.selectOption,attendDate:f,about:e.about,addData:function(t){return e.addData(t)},userUid:e.userUid,who:e.who,onClose:e.onClose})})]})}},5729:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(885),i=n(7313),r="FileArea_fileArea__MQmcW",s="FileArea_previewImg__+SvF8",o=n(7785),c=n(6417),u=function(e){var t=(0,i.useState)(e.file||""),n=(0,a.Z)(t,2),u=n[0],l=n[1];return(0,c.jsxs)("div",{className:r,children:[u&&(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("img",{src:u,className:s,alt:"filePreview"})}),"attendance"!==e.about&&(0,c.jsx)(o.Z,{attachedFileHandler:function(t){e.attachedFileHandler(t),l(t)}})]})}},7785:function(e,t,n){n.d(t,{Z:function(){return l}});var a=n(4165),i=n(5861),r=n(885),s=n(7313),o="FileForm_fileUploadBtn__r9msD",c=n(2964),u=n(6417),l=function(e){var t=(0,s.useState)(""),n=(0,r.Z)(t,2),l=n[0],d=n[1],f=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={maxSizeMb:1,maxWidthOrHeight:900},e.next=4,(0,c.Z)(t,n);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var t=(0,i.Z)((0,a.Z)().mark((function t(n){var i,r,s;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=n.target.files[0])){t.next=8;break}return t.next=4,f(i);case 4:r=t.sent,(s=new FileReader).onloadend=function(t){d(t.currentTarget.result),e.attachedFileHandler(t.currentTarget.result)},s.readAsDataURL(r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("label",{id:"attachedFile",htmlFor:"attachFile",className:o,onClick:function(){l&&d("")},children:l?"\ucd08\uae30\ud654&\ud30c\uc77c\ucd94\uac00":"\ud30c\uc77c\ucd94\uac00"}),(0,u.jsx)("input",{type:"file",accept:"image/*",onChange:v,style:{display:"none"},id:"attachFile"})]})}},4484:function(e,t,n){n.d(t,{Z:function(){return u}});var a=n(1413),i=n(885),r=n(7313),s={"class-subject":"Input_class-subject__E+qGy","rowcolumn-input":"Input_rowcolumn-input__MzKWZ","simsim-Text":"Input_simsim-Text__7+u+1","meetSum-Text":"Input_meetSum-Text__0ijY3","class-memo":"Input_class-memo__eXBTy","attendForm-input":"Input_attendForm-input__KLvku","memo-section":"Input_memo-section__CGRYR","simsimMain-input":"Input_simsimMain-input__TVHos","board-input":"Input_board-input__2xPzk","board-input-half":"Input_board-input-half__Lu9st","fs-80px":"Input_fs-80px__t0quj","fs-70px":"Input_fs-70px__ZcOO7","fs-60px":"Input_fs-60px__QNEgw","fs-50px":"Input_fs-50px__GEaU0","fs-40px":"Input_fs-40px__OICBO"},o=n(6417),c=void 0,u=r.forwardRef((function(e,t){var n=(0,r.useRef)(null),u=(0,r.useState)(""),l=(0,i.Z)(u,2),d=l[0],f=l[1],v=(0,r.useState)(""),m=(0,i.Z)(v,2),p=m[0],h=m[1];(0,r.useEffect)((function(){f("")}),[]),(0,r.useEffect)((function(){f(e.defaultValue)}),[e.defaultValue]);var x=(0,r.useCallback)((function(){var t=25;return"40px"===e.fontSize?t=9:"50px"===e.fontSize?t=8:"60px"===e.fontSize?t=7:"70px"===e.fontSize?t=6:"80px"===e.fontSize&&(t=5),+t}),[]),_=function(){f(n.current.value)};(0,r.useEffect)((function(){!0===e.showOn?h("1"):!1===e.showOn?h("0"):h(e.showOn)}),[e.showOn]),(0,r.useEffect)((function(){g()}),[p]),(0,r.useEffect)((function(){n.current.style.height=e.startheight}),[e.startheight]);var j=function(){var t=x(),a=n.current.value.split("\n"),i=Math.ceil((n.current.clientWidth-50)/(+e.fontSize.slice(0,2)+2)),r=Math.ceil((n.current.clientHeight-50)/(+e.fontSize.slice(0,2)+8)),s=+Math.floor(i*r),o=a.length;a.forEach((function(e){var t=Math.floor(e.length/i);t>1&&(o+=t)})),o>t?e.maxRowAlert("enter"):n.current.value.length>s&&e.maxRowAlert("length")};(0,r.useEffect)((function(){""!==e.fontSize&&void 0!==e.fontSize&&j()}),[e.fontSize]);var g=(0,r.useCallback)((function(t){if(null!==n&&null!==n.current){if(e.alarm)return window.scrollTo(0,n.current.scrollHeight),void j();n.current.style.height="10px",n.current.style.height=n.current.scrollHeight-13+"px"}}),[]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("label",{htmlFor:e.input.id}),"textarea"===e.input.type?(0,o.jsx)("textarea",(0,a.Z)((0,a.Z)({id:e.id,ref:n},e.input),{},{className:s[e.className],onKeyDown:function(){return g(c)},onKeyUp:function(){return g(c)},onClick:function(){return g(c)},value:d||"",onInput:e.onInput,required:!!e.required,onChange:_,placeholder:e.placeholder||""}),"textArea"+e.myKey):(0,o.jsx)("input",(0,a.Z)((0,a.Z)({id:e.input.id,type:e.input.type,required:!!e.required,className:s[e.className],onInput:e.onInput,ref:n},e.input),{},{value:d||"",onChange:_,placeholder:e.placeholder||""}),e.myKey)]})}))},3451:function(e,t,n){var a=n(7313),i=n(1168),r=n(9334),s=n(6417),o=function(e){return(0,s.jsx)("div",{className:r.Z.backdrop,onClick:e.onClose})},c=function(e){return(0,s.jsx)("div",{className:"".concat(r.Z.modal," ").concat(e.addStyle?r.Z[e.addStyle]:""),children:(0,s.jsx)("div",{className:r.Z.content,children:e.children})})},u=document.getElementById("overlays");t.Z=function(e){return(0,s.jsxs)(a.Fragment,{children:[i.createPortal((0,s.jsx)(o,{onClose:e.onClose}),u),i.createPortal((0,s.jsx)(c,{addStyle:e.addStyle,children:e.children}),u)]})}},3776:function(e,t,n){n.d(t,{Z:function(){return s}});n(7313);var a="Student_div__ROh5A",i=n(7405),r=n(6417),s=function(e){var t;return(0,r.jsx)("div",{className:a,children:e.students&&(null===(t=e.students)||void 0===t?void 0:t.map((function(t){return(0,r.jsx)(i.Z,{className:"button-student",name:t.name,num:t.num,onShowOption:e.showOption},t.num)})))})}},7405:function(e,t,n){n.d(t,{Z:function(){return r}});n(7313);var a={"button-student":"StudentBtn_button-student__Ck98o","checklist-student":"StudentBtn_checklist-student__cWFAm"},i=n(6417),r=function(e){return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("button",{className:a[e.className],onClick:e.onShowOption,children:[e.num," ",e.name]})})}},129:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var a=n(4165),i=n(2982),r=n(1413),s=n(5861),o=n(885),c=n(7313),u=[{class:"\ud559\uc5c5\ud559\uc2b5",id:"1",value:"1\ud559\uc5c5\ud559\uc2b5"},{class:"\uad50\uc6b0\uad00\uacc4",id:"2",value:"2\uad50\uc6b0\uad00\uacc4"},{class:"\uc0dd\ud65c\ud0dc\ub3c4",id:"3",value:"3\uc0dd\ud65c\ud0dc\ub3c4"},{class:"\ud559\ubd80\ubaa8",id:"4",value:"4\ud559\ubd80\ubaa8"}],l=n(8429),d=n(3776),f=n(658),v=n.n(f),m=n(7114),p=n.n(m),h="ConsultLists_listArea__cdc1k",x="ConsultLists_nameArea__-zF7h",_="ConsultLists_fileArea__GwBM9",j="ConsultLists_noteArea__JyczP",g="ConsultLists_nameSpan__4PEYx",Z="ConsultLists_nameIcon__3NmaI",b="ConsultLists_editDeleteArea__x0JBh",y="ConsultLists_input__3GPGK",S="ConsultLists_selectArea__45m6A",N="ConsultLists_editFileArea__2w4yw",w="ConsultLists_consultDate__sP2hx",C="ConsultLists_noteTextArea__gQ7Si",k="ConsultLists_sortBtnArea__r60o9",F="ConsultLists_select-area__peb+p",O="ConsultLists_student-select__ZY9aE",D=n(7692),E=n(7785),A=n(4484),U=n(6417),B=function(e){var t,n=e.consult,a=(0,c.useState)(n.attachedFileUrl),i=(0,o.Z)(a,2),s=i[0],u=i[1],l=function(){e.cancelEditor()};return(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("div",{className:x,children:[(0,U.jsx)("span",{className:Z,children:(0,U.jsx)("i",{className:"fa-regular fa-id-badge"})}),(0,U.jsxs)("span",{className:g,children:[n.name," "," | ",e.selectOption&&(0,U.jsxs)("select",{name:"consult-option",id:"option-select",className:S,defaultValue:n.option,children:[(0,U.jsx)("option",{value:"",children:"-- \ubd84\ub958 --"}),null===(t=e.selectOption)||void 0===t?void 0:t.map((function(e){return(0,U.jsx)("option",{value:e.value,children:e.class},e.id)}))]})]})]}),n.attachedFileUrl&&(0,U.jsx)("div",{className:_,children:(0,U.jsx)("img",{src:n.attachedFileUrl,width:"100%","max-height":"20vh",alt:"filePreview"})}),(0,U.jsx)(A.Z,{myKey:n.id,className:y,id:"consult_note",label:"inputData",defaultValue:n.note&&n.note,input:{type:"textarea",style:{height:e.initTextareaHeight+"px"},autoFocus:!0}}),(0,U.jsxs)("div",{className:b,children:[(0,U.jsx)(D.Z,{id:"save"+n.id,className:"consultEditBtn",onclick:function(){!function(t){var n,a=document.querySelector("#consult_note").value,i=document.querySelector("#option-select").value;n=""===s?t.attachedFileUrl:s;var o=(0,r.Z)((0,r.Z)({},t),{},{option:i,attachedFileUrl:n,note:a});JSON.stringify(t)!==JSON.stringify(o)?(e.addData(o),p().fire({icon:"success",title:"\uc790\ub8cc\uac00 \uc800\uc7a5\ub418\uc5c8\uc5b4\uc694.",text:"5\ucd08 \ud6c4\uc5d0 \ucc3d\uc774 \uc0ac\ub77c\uc9d1\ub2c8\ub2e4.",confirmButtonText:"\ud655\uc778",confirmButtonColor:"#85bd82",timer:5e3}),l()):p().fire({icon:"error",title:"\uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694.",text:"\ubcc0\uacbd\ub41c \ub0b4\uc6a9\uc774 \uc5c6\uc5b4\uc694!",confirmButtonText:"\ud655\uc778",confirmButtonColor:"#85bd82",timer:5e3})}(n)},icon:(0,U.jsx)("i",{className:"fa-solid fa-floppy-disk"})}),(0,U.jsx)(D.Z,{id:"cancel"+n.id,className:"consultEditBtn",onclick:l,icon:(0,U.jsx)("i",{className:"fa-solid fa-rectangle-xmark"})})]}),(0,U.jsxs)("div",{className:N,children:[(0,U.jsx)(E.Z,{attachedFileHandler:function(e){u(e)}}),s&&(0,U.jsx)("img",{src:s,width:"60%","max-height":"20vh",alt:"filePreview"})]})]})},I=n(9532),M=n(573),T=n(8737),H=function(e){var t,n=(0,c.useState)([]),a=(0,o.Z)(n,2),s=a[0],u=a[1],l=(0,c.useState)([]),d=(0,o.Z)(l,2),f=d[0],m=d[1],y=(0,c.useState)(""),S=(0,o.Z)(y,2),N=S[0],E=S[1],A=(0,c.useState)(""),H=(0,o.Z)(A,2),R=H[0],L=H[1],z=(0,c.useState)([]),P=(0,o.Z)(z,2),V=P[0],G=P[1],Y=(0,c.useState)([]),J=(0,o.Z)(Y,2),q=J[0],K=J[1],W=(0,c.useState)([]),Q=(0,o.Z)(W,2),X=Q[0],$=Q[1],ee=(0,c.useState)(""),te=(0,o.Z)(ee,2),ne=te[0],ae=te[1],ie=(0,c.useState)(!1),re=(0,o.Z)(ie,2),se=re[0],oe=re[1],ce=(0,c.useRef)(),ue=(0,c.useRef)(),le=(0,c.useRef)();function de(e,t){var n=null===e||void 0===e?void 0:e.sort((function(e,t){var n="".concat(e.id.slice(0,10)," ").concat(e.id.slice(10,15)),a="".concat(t.id.slice(0,10)," ").concat(t.id.slice(10,15));return new Date(n)-new Date(a)}));return"up"===t&&(null===n||void 0===n||n.reverse()),n}(0,c.useEffect)((function(){!function(){var t=(0,M.JU)(I.wO,"consult",e.userUid);(0,M.cf)(t,(function(e){var t,n,a=[],s=[];null===(t=e.data())||void 0===t||null===(n=t.consult_data)||void 0===n||n.forEach((function(e){var t={},n=e.id.slice(5,7),i=e.id.slice(0,4);if(+n>=3)s.push(i),t=(0,r.Z)((0,r.Z)({},e),{},{yearGroup:i});else if(+n<=2){var o=String(+i-1);s.push(o),t=(0,r.Z)((0,r.Z)({},e),{},{yearGroup:o})}a.push(t)})),G((0,i.Z)(new Set(s))),u([].concat(a))}))}()}),[]),(0,c.useEffect)((function(){ce.current.value}),[s]);(0,c.useEffect)((function(){if(s.length>0){var e=null===s||void 0===s?void 0:s.filter((function(e){return e.clName===ne}));m(e);var t=null===e||void 0===e?void 0:e.map((function(e){return e.name}));K((0,i.Z)(new Set(t))),ue.current.value=""}}),[ne]);var fe,ve=function(t){var n,a,i;return null===(n=e.isSubject)||void 0===n||null===(a=n.filter((function(e){return Object.keys(e)[0]===t})))||void 0===a||null===(i=a[0])||void 0===i?void 0:i[t]};return(0,c.useEffect)((function(){var e=function(){var e=v()(),t="",n=e.format("MM"),a=e.format("YYYY");return+n>=2?t=a:+n<=1&&(t=String(+a-1)),t}(),t=ve(e);oe(t)}),[e.isSubject]),(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)("div",{className:k,children:[(0,U.jsxs)("div",{className:F,children:[(0,U.jsxs)("select",{name:"searchYear-selcet",ref:ce,defaultValue:"",className:O,onChange:function(t){var n=t.target.value,a=null===s||void 0===s?void 0:s.filter((function(e){return e.yearGroup===n}));if(m(a),ve(n)){var r,o,c;oe(!0),ae("");var u=null===(r=e.students)||void 0===r||null===(o=r.filter((function(e){return Object.keys(e)[0]===n})))||void 0===o||null===(c=o[0])||void 0===c?void 0:c[n];$(u)}else oe(!1),K((0,i.Z)(new Set(null===a||void 0===a?void 0:a.map((function(e){return e.name})))));ue.current.value=""},children:[(0,U.jsx)("option",{value:"",defaultChecked:!0,children:"--\ud559\ub144\ub3c4--"}),null===V||void 0===V?void 0:V.map((function(e){return(0,U.jsxs)("option",{value:e,children:[e,"\ud559\ub144\ub3c4"]},e)}))]}),se&&(0,U.jsxs)("select",{ref:le,onChange:function(){var e=le.current.value;ae(e)},className:O,value:ne,children:[(0,U.jsx)("option",{value:"",children:"--\ud559\uae09--"}),null===X||void 0===X?void 0:X.map((function(e){return(0,U.jsx)("option",{value:Object.keys(e),children:Object.keys(e)},Object.keys(e))}))]}),(0,U.jsxs)("select",{name:"student-selcet",ref:ue,className:O,defaultValue:"",onChange:function(e){var t,n=e.target.value,a=se?null===f||void 0===f?void 0:f.filter((function(e){return e.clName===ne})):f;t=de("\uc804\uccb4\ud559\uc0dd"===n?a:null===a||void 0===a?void 0:a.filter((function(e){return e.name===n})),"up"),m(t)},children:[(0,U.jsx)("option",{value:"",defaultChecked:!0,children:"--\ud559\uc0dd--"}),(null===f||void 0===f?void 0:f.length)>0&&(0,U.jsx)("option",{value:"\uc804\uccb4\ud559\uc0dd",children:"\uc804\uccb4\ubcf4\uae30"}),null===(fe=q,t=fe.sort((function(e,t){return e>t?1:-1})))||void 0===t?void 0:t.map((function(e){return(0,U.jsx)("option",{value:e,children:e},e)}))]})]}),(0,U.jsx)(D.Z,{id:"saveExcel",className:"sortBtn-consult",name:"\uc5d1\uc140\uc800\uc7a5",onclick:function(){var e=[];s.forEach((function(t){var n=[t.num,t.name,t.option.slice(1),"".concat(t.id.slice(0,10)," ").concat(t.id.slice(10,15)),t.note];e.push(n)})),e.unshift(["\ubc88\ud638","\uc774\ub984","\uad00\ub828","\ub0a0\uc9dc(\ub144\uc6d4\uc77c \uc2dc\uac01)","\uae30\ub85d\ub0b4\uc6a9"]);var t=T.P6.book_new(),n=T.P6.aoa_to_sheet(e);n["!cols"]=[{wpx:40},{wpx:60},{wpx:60},{wpx:100},{wpx:150}],T.P6.book_append_sheet(t,n,"\uc0c1\ub2f4\uae30\ub85d"),(0,T.NC)(t,"\uc0c1\ub2f4\uae30\ub85d(".concat(ce.current.value,").xlsx"))}})]}),f?(0,U.jsx)("p",{children:"* \uc815\ubcf4\ubcf4\ud638\ub97c \uc704\ud574 \uba3c\uc800 \ud56d\ubaa9\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."}):(0,U.jsx)("p",{children:"* \uc790\ub8cc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. "}),f&&(null===f||void 0===f?void 0:f.map((function(t){return(0,U.jsx)("div",{children:(0,U.jsx)("li",{className:h,id:t.id,children:N===t.id?(0,U.jsx)(B,{selectOption:e.selectOption,consult:t,cancelEditor:function(){return E("")},initTextareaHeight:R,addData:function(t){return function(t){u((function(e){var n,a=(0,i.Z)(e);return e.forEach((function(e,a){e.id===t.id&&(n=a)})),a[n]=se?(0,r.Z)((0,r.Z)({},t),{},{clName:ne}):t,a})),m((function(e){var n,a=(0,i.Z)(e);return e.forEach((function(e,a){e.id===t.id&&(n=a)})),a[n]=se?(0,r.Z)((0,r.Z)({},t),{},{clName:ne}):t,a})),e.addData(t)}(t)}}):(0,U.jsxs)("div",{children:[(0,U.jsxs)("div",{className:x,children:[(0,U.jsx)("span",{className:Z,children:(0,U.jsx)("i",{className:"fa-regular fa-id-badge"})}),(0,U.jsx)("p",{className:w,children:(n=t.id.slice(0,10),n.split("-")[0].slice(2)+"\ub144 "+n.split("-")[1].replace(/(^0+)/,"")+"\uc6d4 "+n.split("-")[2].replace(/(^0+)/,"")+"\uc77c  ")}),(0,U.jsx)("span",{className:g,id:"1"+t.id,children:"".concat(t.name," | ").concat(t.option.slice(1))})]}),t.attachedFileUrl&&(0,U.jsx)("div",{className:_,children:(0,U.jsx)("img",{src:t.attachedFileUrl,height:"400px",alt:"filePreview"})}),(0,U.jsx)("div",{className:j,children:(0,U.jsx)("span",{className:C,id:"note"+t.id,children:t.note?t.note:"'\uae30\ub85d\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.'"})}),(0,U.jsxs)("div",{className:b,children:[(0,U.jsx)(D.Z,{id:"edit"+t.id,className:"consultEditBtn",onclick:function(){var e;e=t.id,E(e);var n=document.getElementById("note".concat(t.id)).scrollHeight;L(n)},icon:(0,U.jsx)("i",{className:"fa-solid fa-pencil"})}),(0,U.jsx)(D.Z,{id:"delete"+t.id,className:"consultEditBtn",onclick:function(){!function(t){p().fire({title:"\uc790\ub8cc\ub97c \uc9c0\uc6b8\uae4c\uc694?",text:"".concat(t.id.slice(0,10)," | ").concat(t.name," | ").concat(t.option.slice(1)),showDenyButton:!0,confirmButtonText:"\uc0ad\uc81c",confirmButtonColor:"#db100cf2",denyButtonColor:"#85bd82",denyButtonText:"\ucde8\uc18c"}).then((function(n){var a;n.isConfirmed&&(e.deleteConsult(t.id,t.attachedFileUrl),u((function(e){return null===e||void 0===e?void 0:e.filter((function(e){return e.id!==t.id}))})),m((function(e){return null===e||void 0===e?void 0:e.filter((function(e){return e.id!==t.id}))})),se||K((0,i.Z)(new Set(null===s||void 0===s||null===(a=s.filter((function(e){return e.yearGroup===ce.current.value&&e.id!==t.id})))||void 0===a?void 0:a.map((function(e){return e.name}))))))}))}(t)},icon:(0,U.jsx)("i",{className:"fa-solid fa-trash-can"})})]})]},t.id+"item")},t.id)},t.id);var n})))]})},R=n(571),L=n.p+"static/media/consultAdd.88e54d44455fc22d2a09.gif",z=n(6797),P=n(5162),V=function(e){var t,n=(0,c.useState)(!1),f=(0,o.Z)(n,2),m=f[0],p=f[1],h=(0,c.useState)(""),x=(0,o.Z)(h,2),_=x[0],j=x[1],g=(0,c.useState)(!1),Z=(0,o.Z)(g,2),b=Z[0],y=Z[1],S=(0,c.useState)(!1),N=(0,o.Z)(S,2),w=N[0],C=N[1],k=(0,c.useState)(""),F=(0,o.Z)(k,2),O=F[0],D=F[1],E=(0,c.useState)([]),A=(0,o.Z)(E,2),B=A[0],T=A[1],V=(0,c.useState)([]),G=(0,o.Z)(V,2),Y=G[0],J=G[1],q=(0,c.useState)(!1),K=(0,o.Z)(q,2),W=K[0],Q=K[1],X=(0,c.useRef)(),$=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n){var s,o,c,u,l,d,f,v;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s="",""===n.attachedFileUrl){t.next=8;break}return t.next=4,(0,z.sf)((0,z.iH)(I.Hw,"".concat(e.userUid,"/").concat((0,P.Z)())),n.attachedFileUrl,"data_url");case 4:return o=t.sent,t.next=7,(0,z.Jt)(o.ref);case 7:s=t.sent;case 8:return c=(0,r.Z)((0,r.Z)({},n),{},{attachedFileUrl:s}),u=ne(n.id.slice(0,10)),ae(u)&&(c=(0,r.Z)((0,r.Z)({},c),{},{clName:""===O?c.clName:O})),delete c.yearGroup,l=(0,M.JU)(I.wO,"consult",e.userUid),t.next=15,(0,M.QT)(l);case 15:if(!(d=t.sent).exists()){t.next=23;break}return(v=(0,i.Z)(null===(f=d.data().consult_data)||void 0===f?void 0:f.filter((function(e){return e.id!==c.id})))).push(c),t.next=21,(0,M.pl)(l,{consult_data:v});case 21:t.next=25;break;case 23:return t.next=25,(0,M.pl)(l,{consult_data:[c]});case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ee=function(){var t=(0,s.Z)((0,a.Z)().mark((function t(n,r){var s,o,c,u,l;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""===r){t.next=3;break}return t.next=3,(0,z.oq)((0,z.iH)(I.Hw,r));case 3:return c=(0,M.JU)(I.wO,"consult",e.userUid),t.next=6,(0,M.QT)(c);case 6:return u=t.sent,l=(0,i.Z)(null===u||void 0===u||null===(s=u.data())||void 0===s||null===(o=s.consult_data)||void 0===o?void 0:o.filter((function(e){return e.id!==n}))),t.next=10,(0,M.pl)(c,{consult_data:l});case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();(0,c.useEffect)((function(){te()}),[O]);var te=function(){null===Y||void 0===Y||Y.forEach((function(e){Object.keys(e)[0]===O&&T(Object.values(e)[0])})),""===O&&T([])},ne=function(e){var t=v()(e),n="",a=t.format("MM"),i=t.format("YYYY");return+a>=2?n=i:+a<=1&&(n=String(+i-1)),n};(0,c.useEffect)((function(){var t,n,a,i=ne(),r=null===e||void 0===e||null===(t=e.students)||void 0===t||null===(n=t.filter((function(e){return Object.keys(e)[0]===i})))||void 0===n||null===(a=n[0])||void 0===a?void 0:a[i];J(r)}),[e.students]);var ae=function(t){var n,a,i,r;e.isSubject&&(n=null===(a=e.isSubject)||void 0===a||null===(i=a.filter((function(e){return Object.keys(e)[0]===t})))||void 0===i||null===(r=i[0])||void 0===r?void 0:r[t]);return n};return(0,c.useEffect)((function(){var e=ne(),t=ae(e);Q(t)}),[e.isSubject]),(0,U.jsxs)(U.Fragment,{children:[w&&(0,U.jsx)(R.Z,{onClose:function(){return C(!1)},imgSrc:L,text:(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("p",{style:{fontSize:"1.3em",textAlign:"center",margin:"5px"},children:"=== \uc0c1\ub2f4\uae30\ub85d \uc608\uc2dc ==="}),(0,U.jsx)("p",{style:{margin:"15px"},children:"* \ud654\uba74 \uc67c\ucabd \uc0c1\ub2e8\uc758 \ud604\uc7ac \ud398\uc774\uc9c0 \ud0c0\uc774\ud2c0\uc744 \ud074\ub9ad\ud558\uc2dc\uba74 \ub2e4\uc2dc \ubcf4\uc2e4 \uc218 \uc788\uc5b4\uc694!"})]})}),(0,U.jsxs)("div",{id:"title-div",children:[(0,U.jsxs)("button",{id:"title-btn",className:"consult",onClick:function(){return C(!0)},children:[(0,U.jsx)("i",{className:"fa-regular fa-comments"})," \uae08\ucabd\uc0c1\ub2f4\uc18c"]}),(0,U.jsx)("button",{id:"switch-btn",onClick:function(){y(!b)},children:b?(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("i",{className:"fa-solid fa-list-ol"})," \uc4f0\uae30"]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("i",{className:"fa-regular fa-rectangle-list"})," \ubcf4\uae30"]})})]}),m&&(0,U.jsx)(l.Z,{onClose:function(){p(!1)},who:_,date:new Date,selectOption:u,addData:$,about:"consulting",userUid:e.userUid,isSubject:!0}),0===(null===Y||void 0===Y?void 0:Y.length)&&(0,U.jsxs)(U.Fragment,{children:[(0,U.jsx)("div",{children:"\uc62c\ud574 \ud559\uc0dd \uba85\ub2e8\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\ub124\uc694!"}),(0,U.jsx)("div",{children:"\uba54\ub274\uc758 \uacf0\ub3cc\uc774\ub97c \ub20c\ub7ec\uc11c"}),(0,U.jsx)("div",{children:"\ud559\uc0dd \uba85\ub2e8\uc744 \uba3c\uc800 \uc785\ub825\ud574\uc8fc\uc138\uc694!"})]}),b?(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(H,{userUid:e.userUid,selectOption:u,addData:function(e){return $(e)},deleteConsult:function(e,t){return ee(e,t)},isSubject:e.isSubject,students:e.students})}):(0,U.jsxs)(U.Fragment,{children:[W&&(0,U.jsxs)("div",{children:[(0,U.jsxs)("select",{ref:X,onChange:function(){var e=X.current.value;D(e)},style:{fontSize:"1.2rem",width:"auto",margin:"10px 0 20px 0"},value:O,children:[(0,U.jsx)("option",{value:"",children:"--\ud559\uae09--"}),null===Y||void 0===Y?void 0:Y.map((function(e){return(0,U.jsx)("option",{value:Object.keys(e),children:Object.keys(e)},Object.keys(e))}))]}),""===(null===X||void 0===X||null===(t=X.current)||void 0===t?void 0:t.value)&&"* \ud559\uae09\uc744 \uba3c\uc800 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."]}),(0,U.jsx)(d.Z,{students:W?B:Y,showOption:function(e){j(e.target.innerText),p(!0)},isSubject:e.isSubject})]})]})}},571:function(e,t,n){n.d(t,{Z:function(){return c}});n(7313);var a=n(3451),i="ExampleModal_xmark__aUZiP",r="ExampleModal_img-div__6WVX9",s="ExampleModal_img__oJEG0",o=n(6417),c=function(e){return(0,o.jsxs)(a.Z,{onClose:e.onClose,children:[(0,o.jsx)("span",{onClick:e.onClose,className:i,children:(0,o.jsx)("i",{className:"fa-regular fa-circle-xmark"})}),(0,o.jsx)("div",{children:e.text}),(0,o.jsx)("div",{className:r,children:(0,o.jsx)("img",{src:e.imgSrc,className:s,alt:"exampleGif"})}),(0,o.jsx)("div",{children:e.bottomText})]})}},5162:function(e,t,n){var a;n.d(t,{Z:function(){return d}});var i=new Uint8Array(16);function r(){if(!a&&!(a="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(i)}var s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var o=function(e){return"string"===typeof e&&s.test(e)},c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase();if(!o(n))throw TypeError("Stringified UUID is invalid");return n};var d=function(e,t,n){var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=a[i];return t}return l(a)}},9334:function(e,t){t.Z={backdrop:"Modal_backdrop__uI0d0",modal:"Modal_modal__T0oz4","slide-down":"Modal_slide-down__qIoYG",fadeModal:"Modal_fadeModal__2kPt8",addOverflow:"Modal_addOverflow__sGPDg",showCopyCal:"Modal_showCopyCal__DKN68",attendHeight:"Modal_attendHeight__8KIeR"}}}]);