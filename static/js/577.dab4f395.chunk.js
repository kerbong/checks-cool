"use strict";(self.webpackChunkchecks_cool=self.webpackChunkchecks_cool||[]).push([[577],{5729:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(885),r=n(7313),a="FileArea_fileArea__MQmcW",s="FileArea_previewImg__+SvF8",o=n(7785),l=n(6417),u=function(e){var t=(0,r.useState)(e.file||""),n=(0,i.Z)(t,2),u=n[0],c=n[1];return(0,l.jsxs)("div",{className:a,children:[u&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("img",{src:u,className:s,alt:"filePreview"})}),"attendance"!==e.about&&(0,l.jsx)(o.Z,{attachedFileHandler:function(t){e.attachedFileHandler(t),c(t)},src:u,about:e.about})]})}},7785:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(4165),r=n(5861),a=n(885),s=n(7313),o="FileForm_fileUploadBtn__r9msD",l=n(2964),u=n(6417),c=function(e){var t=(0,s.useState)(e.src||""),n=(0,a.Z)(t,2),c=n[0],d=n[1],f=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={maxSizeMb:1,maxWidthOrHeight:900},e.next=4,(0,l.Z)(t,n);case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var t=(0,r.Z)((0,i.Z)().mark((function t(n){var r,a,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=n.target.files[0])){t.next=8;break}return t.next=4,f(r);case 4:a=t.sent,(s=new FileReader).onloadend=function(t){d(t.currentTarget.result),e.attachedFileHandler(t.currentTarget.result)},s.readAsDataURL(a);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("label",{id:"attachedFile",htmlFor:"attachFile",className:o,onClick:function(){c&&d("")},style:"padIt"===e.about?{backgroundColor:"#687f7f"}:{},children:c?"\ucd08\uae30\ud654&\uc774\ubbf8\uc9c0\ucd94\uac00":"\uc774\ubbf8\uc9c0 \ucd94\uac00"}),(0,u.jsx)("input",{type:"file",accept:"image/*",onChange:v,style:{display:"none"},id:"attachFile"})]})}},7577:function(e,t,n){n.r(t),n.d(t,{default:function(){return me}});var i=n(2982),r=n(4165),a=n(5861),s=n(885),o=n(7313),l=n(650),u=n(573),c=n(1095),d=n(7114),f=n.n(d),v=n(658),m=n.n(v),p=function(e){var t=e.date,n=m()(),i=m()(t),r=n.diff(i,"day"),a=n.diff(i,"month");return r<0?"\ubbf8\ub798??":r<1?"\uc624\ub298":1===r?"\uc5b4\uc81c":a<1?"".concat(r,"\uc77c \uc804"):"".concat(a,"\ub2ec \uc804")},x="PadIt_flex-center__7siD7",h="PadIt_flex-center-wrap__sohPC",g="PadIt_flex-center-all__tf081",j="PadIt_flex-end__ges3F",Z="PadIt_flex-col-center__NwjrM",w="PadIt_margin10__CxXXZ",N="PadIt_margin10-wid95__LA37d",y="PadIt_minwid-250__N2eKM",b="PadIt_memoAdd-input__5s-Z5",_="PadIt_flex-around-80__-SPun",S="PadIt_fs-2rem__BA7cq",C="PadIt_fs-17rem__Kz9qD",k="PadIt_fs-14rem__X5YiX",I="PadIt_li-btn__H2oTP",F="PadIt_li__kanMp",T="PadIt_bgcolor-div__Q+TKl",D="PadIt_add-btn__eIGk7",U="PadIt_ul__FLabr",P="PadIt_closeBtn__3UWNS",H="PadIt_color-area__TaUDy",O="PadIt_color-area-clicked__atu9R",B="PadIt_color-span__Jat76",E="PadIt_date__ah4LB",A="PadIt_section-title__xW2gm",L="PadIt_select__9wQjw",M="PadIt_dropdown-li-nonehover__XckCB",Y="PadIt_toggleSwitch__BY1fu",J="PadIt_toggleButton__6z0JP",q="PadIt_active__w3DKR",R="PadIt_previewImg__iWeUh",z=n(1413),W=n(3451),Q=n(4484),G=n(5729),V=n(6417),K=["#FFACAC","#FFD9AC","#FFFFAC","#BDFFAC","#ACDEFF","#C8ACFF","#FFFFFF"],X=function(e){var t=e.onClose,n=e.delMemoHandler,i=e.addMemoHandler,r=e.nowMemo,a=e.data,l=e.isTeacher,u=e.gridTemplate,c=e.sectionNames,d=e.isSaving,v=(0,o.useState)("#FFACAC"),m=(0,s.Z)(v,2),p=m[0],x=m[1],h=(0,o.useState)(!1),j=(0,s.Z)(h,2),w=j[0],y=j[1],_=(0,o.useState)(""),S=(0,s.Z)(_,2),C=S[0],k=S[1];(0,o.useEffect)((function(){r&&(y(!0),x(r.bgColor))}),[r]);var F=function(e,t){var n,i;e.target.value.length>t&&(e.target.value=e.target.value.substr(0,t),n="\uc785\ub825 \ubd88\uac00",i="\uae00\uc790\uc218\ub97c \ucd08\uacfc\ud588\uc5b4\uc694! \ub0b4\uc6a9\uc744 ".concat(t,"\uc790 \uc774\ub0b4\ub85c \uc904\uc5ec\uc8fc\uc138\uc694."),f().fire({icon:"error",title:n,text:i,confirmButtonText:"\ud655\uc778",confirmButtonColor:"#85bd82",timer:5e3}))};return(0,o.useEffect)((function(){a&&(y(!0),x(a.bgColor))}),[a]),(0,o.useEffect)((function(){w&&(document.querySelector(".modal").style.backgroundColor=p)}),[w]),(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{className:P,style:{display:"flex",justifyContent:"flex-end"},onClick:function(){t()},children:(0,V.jsx)("i",{className:"fa-regular fa-circle-xmark"})}),(0,V.jsxs)("form",{onSubmit:function(e){e.preventDefault(),d||(w?i(e,p,C,a):i(e,p,C))},className:Z,children:[(!a||l||a.userInfo===localStorage.getItem("padUserInfo"))&&(0,V.jsxs)(V.Fragment,{children:[!u&&(0,V.jsx)("div",{className:N,children:(0,V.jsxs)("select",{name:"option",defaultValue:(null===a||void 0===a?void 0:a.grid)||"",className:L,children:[(0,V.jsx)("option",{value:"",children:"-\uc139\uc158 \uc120\ud0dd-"}),null===c||void 0===c?void 0:c.map((function(e,t){return(0,V.jsxs)("option",{value:e,children:[" ",e]},t)}))]})}),(0,V.jsx)("div",{className:N,children:(0,V.jsx)("input",{type:"text",name:"title",required:!0,placeholder:l?"\uc81c\ubaa9":"\uc131\uacfc \uc774\ub984\uc744 \ud3ec\ud568\ud55c \uc81c\ubaa9 (\uc608 - \uae40\uc9c0\uc218 \uc785\ub2c8\ub2e4)",title:"\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",className:b,autoFocus:!0,defaultValue:a?a.title:""})}),(0,V.jsx)("hr",{style:{width:"96%",margin:"13px"}}),(0,V.jsx)("div",{className:N,children:(0,V.jsx)(Q.Z,{myKey:"text-input",className:"memoAdd-textarea",label:"insteadText",input:{name:"text",type:"textarea",required:!0},onInput:function(e){return F(e,500)},required:!0,placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",defaultValue:a?a.text:""})}),(0,V.jsx)("div",{className:N,style:{justifyContent:"center"},children:(0,V.jsx)(G.Z,{about:"padIt",attachedFileHandler:function(e){k(e)},file:(null===a||void 0===a?void 0:a.fileUrl)||""})}),(0,V.jsxs)("div",{className:N,style:{justifyContent:"space-between"},children:[(0,V.jsxs)("div",{className:"".concat(g," ").concat(T," "),children:[(0,V.jsx)("span",{className:B,children:"\ubc30\uacbd"}),K.map((function(e,t){return(0,V.jsx)("span",{onClick:function(){return x(e)},className:p!==e?H:O,style:{backgroundColor:e}},t)}))]}),w&&(0,V.jsx)("input",{type:"button",name:"delete",value:"\uc0ad\uc81c",className:I,onClick:function(e){d||n(a)}}),(0,V.jsx)("input",{type:"submit",value:w?"\uc218\uc815":"\ucd94\uac00",className:I})]})]}),a&&!l&&a.userInfo!==localStorage.getItem("padUserInfo")&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:N,style:{fontSize:"1.5rem",padding:"15px"},children:a.title}),(0,V.jsx)("hr",{style:{width:"96%",margin:"13px"}}),(0,V.jsx)("div",{className:N,style:{fontSize:"1.3rem",padding:"15px"},children:a.text}),(null===a||void 0===a?void 0:a.fileUrl)&&(0,V.jsx)("div",{className:N,style:{justifyContent:"center"},children:(0,V.jsx)("img",{src:C,className:R,alt:"filePreview"})})]})]})]})})},$=n(4636),ee=n(790),te=n(5987),ne=["withOpacity","isDragging","style","data","isTeacher"],ie=(0,o.forwardRef)((function(e,t){var n,i,r=e.withOpacity,a=e.isDragging,s=e.style,o=e.data,l=e.isTeacher,u=(0,te.Z)(e,ne),c=isNaN(+o.id)?(0,z.Z)((0,z.Z)({maxWidth:"250px",width:"80%",borderRadius:"10px",padding:"20px 10px"},s),{},{backgroundColor:"#ffffff"}):(0,z.Z)({opacity:r?"0.5":"1",transformOrigin:"50% 50%",height:"auto",maxWidth:"230px",width:"80%",borderRadius:"10px",padding:"20px 10px",cursor:a?"grabbing":"grab",backgroundColor:"#ffffff",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:a?"rgb(63 63 68 / 5%) 0px 2px 0px 2px, rgb(34 33 81 / 15%) 0px 2px 3px 2px":"rgb(63 63 68 / 5%) 0px 0px 0px 1px, rgb(34 33 81 / 15%) 0px 1px 3px 0px",transform:a?"scale(1.15)":"scale(1)"},s),d=(n=null===o||void 0===o?void 0:o.text,i=50,(null===n||void 0===n?void 0:n.length)>i?(null===n||void 0===n?void 0:n.substring(0,i))+"...":n);return(0,V.jsx)("div",(0,z.Z)((0,z.Z)({ref:t,style:c},u),{},{children:isNaN(+o.id)?(0,V.jsx)("div",{className:Z,style:{width:"90%"}}):(0,V.jsxs)("div",{className:Z,style:{width:"90%",height:"auto"},children:[(0,V.jsx)("span",{className:k,children:o.title}),l&&(0,V.jsx)("span",{className:E,children:o.createdAt}),(0,V.jsx)("hr",{style:{width:"100%",margin:"20px 5px"}}),(0,V.jsx)("span",{children:d})]})}))})),re=(0,o.forwardRef)((function(e,t){var n=(0,$.nB)({id:e.id}),i=n.isDragging,r=n.attributes,a=n.listeners,s=n.setNodeRef,o=n.transform,l=n.transition,u={transform:ee.ux.Transform.toString(o),transition:l||void 0,backgroundColor:e.color,height:i?"100px":"auto"};return(0,V.jsx)(ie,(0,z.Z)((0,z.Z)((0,z.Z)({ref:s,style:u,withOpacity:i},e),r),a))})),ae=function(e){var t=e.children,n=e.columns,i=e.styles;return(0,V.jsx)("div",{style:(0,z.Z)({display:"grid",gridTemplateColumns:"repeat(".concat(n,", 1fr)"),gridGap:10,width:"95%",margin:"40px auto",justifyItems:"center",alignItems:"start",height:"max-content"},i),children:t})},se=n(7731),oe=n(6797),le=n(7753),ue=n(5162),ce=function(e){var t=e.onClose,n=e.addSectionHandler,i=e.existName,r=e.delSectionHandler,a=(0,o.useState)(i||""),l=(0,s.Z)(a,2),u=l[0],c=l[1];return(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{className:P,style:{display:"flex",justifyContent:"flex-end"},onClick:function(){t()},children:(0,V.jsx)("i",{className:"fa-regular fa-circle-xmark"})}),(0,V.jsx)("form",{onSubmit:function(e){e.preventDefault(),0!==u.trim().length&&n(u)},className:Z,children:(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("div",{className:A,style:{backgroundColor:"inherit"},children:i?"\uc139\uc158\uc774\ub984 \uc218\uc815\ud558\uae30":"\uc139\uc158 \ucd94\uac00\ud558\uae30"}),(0,V.jsx)("hr",{style:{width:"96%",margin:"13px"}}),(0,V.jsxs)("div",{className:N,style:{justifyContent:"center"},children:[(0,V.jsx)("input",{type:"text",required:!0,placeholder:"\uc0c8\ub85c \ucd94\uac00\ud560 \uc139\uc158\uc758 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",className:b,style:{width:"80%",textAlign:"center"},autoFocus:!0,onChange:function(e){var t=e.target.value;c(t)},value:u}),(0,V.jsx)("p",{children:i?"* \uc0ad\uc81c \ubc84\ud2bc\uc744 \ub204\ub974\uc2dc\uba74, \ud604\uc7ac \uc139\uc158\uc758 \ubaa8\ub4e0 \ub370\uc774\ud130\ub3c4 \uc0ad\uc81c\ub429\ub2c8\ub2e4.":"* \ucd94\uac00 \ubc84\ud2bc\uc744 \ub204\ub974\uc2dc\uba74, \ubc14\ub85c \uc139\uc158\uc774 \ucd94\uac00\ub429\ub2c8\ub2e4."})]}),(0,V.jsxs)("div",{className:N,style:i?{justifyContent:"space-between"}:{justifyContent:"end"},children:[i&&(0,V.jsx)("input",{type:"button",name:"delete",value:"\uc0ad\uc81c",className:I,onClick:function(e){r(i)}}),(0,V.jsx)("input",{type:"submit",value:i?"\uc218\uc815":"\ucd94\uac00",className:I})]})]})})]})},de=function(e){var t,n,c,d,v,p,h=e.padDatas,g=e.padName,Z=e.onClose,w=e.isTeacher,N=e.padSectionNames,y=e.padDatasHandler,b=e.students,_=e.userUid,S=(e.clName,(0,o.useState)(!1)),k=(0,s.Z)(S,2),I=k[0],F=k[1],T=(0,o.useState)(!0),U=(0,s.Z)(T,2),H=U[0],O=U[1],B=(0,o.useState)(null),E=(0,s.Z)(B,2),L=E[0],M=E[1],Y=(0,le.Dy)((0,le.VT)(le.MA),(0,le.VT)(le.LO)),J=(0,o.useState)(window.innerWidth),q=(0,s.Z)(J,2),R=q[0],Q=q[1],G=(0,o.useState)([]),K=(0,s.Z)(G,2),ee=K[0],te=K[1],ne=(0,o.useState)(!1),de=(0,s.Z)(ne,2),fe=de[0],ve=de[1],me=(0,o.useState)({}),pe=(0,s.Z)(me,2),xe=pe[0],he=pe[1],ge=(0,o.useState)(!1),je=(0,s.Z)(ge,2),Ze=je[0],we=je[1],Ne=(0,o.useState)([]),ye=(0,s.Z)(Ne,2),be=ye[0],_e=ye[1],Se=(0,o.useState)(null),Ce=(0,s.Z)(Se,2),ke=Ce[0],Ie=Ce[1],Fe=(0,o.useState)(!1),Te=(0,s.Z)(Fe,2),De=Te[0],Ue=Te[1],Pe=(0,o.useState)(""),He=(0,s.Z)(Pe,2),Oe=He[0],Be=He[1],Ee=(0,o.useState)(!1),Ae=(0,s.Z)(Ee,2),Le=Ae[0],Me=Ae[1],Ye=(0,o.useState)({}),Je=(0,s.Z)(Ye,2),qe=Je[0],Re=Je[1],ze=(0,o.useState)([]),We=(0,s.Z)(ze,2),Qe=We[0],Ge=We[1],Ve=(0,o.useState)(!1),Ke=(0,s.Z)(Ve,2),Xe=Ke[0],$e=Ke[1];(0,o.useEffect)((function(){var e=function(){Q(window.innerWidth)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,o.useEffect)((function(){0===N.length?_e(["0"]):_e(N)}),[N]),(0,o.useEffect)((function(){0!==h.length&&te(h)}),[h]);var et=(0,o.useRef)(0),tt=(0,o.useCallback)((function(e){et.current=Date.now(),we(!1),M(e.active.id)}),[]),nt=function(e){var t,n;Date.now()-et.current<300?(he(null===ee||void 0===ee||null===(t=ee.filter((function(t){return t.id===e.active.id})))||void 0===t?void 0:t[0]),ve(!0)):(ve(!1),he({}),we(!0),e.active.id!==(null===(n=e.over)||void 0===n?void 0:n.id)&&te(ke?function(t){var n=null===t||void 0===t?void 0:t.map((function(t){return t.id!==e.active.id?t:(0,z.Z)((0,z.Z)({},t),{},{grid:ke})}));return y(n,be),n}:function(t){var n=t.findIndex((function(t){return t.id===e.active.id})),i=t.findIndex((function(t){var n;return t.id===(null===(n=e.over)||void 0===n?void 0:n.id)})),r=(0,$.Rp)(t,n,i);return y(r,be),r}));M(null)},it=(0,o.useCallback)((function(){M(null)}),[]),rt=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,oe.oq)((0,oe.iH)(l.Hw,t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n,a,s){var o,u,c,d,f,v,p,x,h,g;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o=t.target.title.value,u=t.target.text.value,c=H?"":t.target.option.value,""!==(null===o||void 0===o?void 0:o.trim())&&""!==(null===u||void 0===u?void 0:u.trim())){e.next=6;break}return e.abrupt("return");case 6:if(H||""!==(null===c||void 0===c?void 0:c.trim())){e.next=8;break}return e.abrupt("return");case 8:if($e(!0),d="",""===a){e.next=17;break}return e.next=13,(0,oe.sf)((0,oe.iH)(l.Hw,"".concat(_,"/").concat((0,ue.Z)())),a,"data_url");case 13:return f=e.sent,e.next=16,(0,oe.Jt)(f.ref);case 16:d=e.sent;case 17:h=H?"0":c,s?(p={title:o,text:u,userInfo:s.userInfo,createdAt:m()().format("MM-DD HH:mm"),bgColor:n,grid:h,id:s.id,fileUrl:d},x=(0,i.Z)(ee),g=x.findIndex((function(e){return e.id===s.id})),x.splice(g,1,p),ve(!1)):((v=localStorage.getItem("padUserInfo"))||(v=(0,ue.Z)(),localStorage.setItem("padUserInfo",v)),p={title:o,text:u,userInfo:v,createdAt:m()().format("MM-DD HH:mm"),bgColor:n,grid:h,id:String(ee.length),fileUrl:d},F(!1),(x=(0,i.Z)(ee)).push(p)),te(x),y(x,be),$e(!1);case 22:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}(),st=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f().fire({icon:"warning",title:"\uba54\ubaa8\ub97c \uc0ad\uc81c\ud560\uae4c\uc694?",text:"".concat(t.title," \uc81c\ubaa9\uc758 \uba54\ubaa8\ub97c \uc0ad\uc81c\ud560\uae4c\uc694?"),confirmButtonText:"\ud655\uc778",showDenyButton:!0,denyButtonText:"\ucde8\uc18c",confirmButtonColor:"#85bd82"}).then((function(e){if(e.isConfirmed){var n,r;$e(!0),""!==t.fileUrl&&rt(t.fileUrl);var a=(0,i.Z)(ee);a=null===(r=a=null===(n=a)||void 0===n?void 0:n.filter((function(e){return e.id!==t.id})))||void 0===r?void 0:r.map((function(e,t){return(0,z.Z)((0,z.Z)({},e),{},{id:String(t)})})),te(a),y(a,be),ve(!1),$e(!1)}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){}),[ke]);var ot=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,u.JU)(l.wO,"checkLists",_),(0,u.cf)(t,(function(e){var t,n=(0,i.Z)(null===e||void 0===e||null===(t=e.data())||void 0===t?void 0:t.checkLists_data)||[],r={};null===n||void 0===n||n.forEach((function(e){(null===e||void 0===e?void 0:e.title)===g&&(r=e)})),Ge(n),Re(r)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){w&&ot()}),[w]);var lt=function(){return+m()().format("MM")<=2?String(+m()().format("YYYY")-1):m()().format("YYYY")},ut=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var s,o,c,d,v,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),console.log(n),s=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(s){var l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"sameTitle"!==s||n||f().fire({icon:"warning",title:"\ub3d9\uc77c\ud55c \uc81c\ubaa9 \uc874\uc7ac",text:"\uae30\uc874 \uc790\ub8cc\uc5d0 \ub3d9\uc77c\ud55c \uc81c\ubaa9\uc758 \uc790\ub8cc\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4. \uacc4\uc18d \uc800\uc7a5 \ud558\uc2dc\uaca0\uc5b4\uc694?",confirmButtonText:"\ud655\uc778",showDenyButton:!0,denyButtonText:"\ucde8\uc18c",confirmButtonColor:"#85bd82"}).then((function(e){e.isConfirmed&&l(),e.isDenied})),l=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var n,a,s,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((null===o||void 0===o?void 0:o.length)>0)){e.next=13;break}return n=(0,z.Z)((0,z.Z)({},t),{},{yearGroup:lt()}),a=(0,i.Z)(o),s=void 0,a.forEach((function(e,t){e.id===n.id&&(s=t)})),void 0===s?a.push(n):(null!==t&&void 0!==t&&t.new_id&&delete(n=(0,z.Z)((0,z.Z)({},n),{},{id:t.new_id})).new_id,a[s]=n),a=a.filter((function(e){return null!==e.id&&"null"!==e.id})),e.next=9,(0,u.pl)(c,{checkLists_data:(0,i.Z)(a)});case 9:Re(t),Ge((0,i.Z)(a)),e.next=18;break;case 13:return l=(0,z.Z)((0,z.Z)({},t),{},{yearGroup:lt()}),e.next=16,(0,u.pl)(c,{checkLists_data:[l]});case 16:Re(t),Ge([l]);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),("new"===s||n)&&l();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=Qe,c=(0,u.JU)(l.wO,"checkLists",_),d=/ /gi,v=null===o||void 0===o?void 0:o.filter((function(e){return e.title.replace(d,"")===t.title.replace(d,"")&&e.id!==t.id})),m=null===o||void 0===o?void 0:o.filter((function(e){return e.title.replace(d,"")===t.title.replace(d,"")&&e.id===t.id})),(null===v||void 0===v?void 0:v.length)>0&&0===(null===m||void 0===m?void 0:m.length)?s("sameTitle"):s("new");case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ct=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,i,a,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,u.JU)(l.wO,"checkLists",_),e.next=3,(0,u.QT)(a);case 3:return s=e.sent,o=null===s||void 0===s||null===(n=s.data())||void 0===n?void 0:n.checkLists_data,i=null===o||void 0===o?void 0:o.filter((function(e){return e.id!==t.id})),e.next=8,(0,u.pl)((0,u.JU)(l.wO,"checkLists",_),{checkLists_data:i});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)("div",{children:[I&&(0,V.jsx)(W.Z,{onClose:function(){return F(!1)},children:(0,V.jsx)(X,{onClose:function(){return F(!1)},addMemoHandler:at,gridTemplate:H,sectionNames:be,isSaving:Xe})}),fe&&(0,V.jsx)(W.Z,{onClose:function(){return ve(!1)},children:(0,V.jsx)(X,{onClose:function(){return ve(!1)},data:xe,isTeacher:w,addMemoHandler:at,delMemoHandler:st,gridTemplate:H,sectionNames:be,isSaving:Xe})}),De&&(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(W.Z,{onClose:function(){Ue(!1),Be("")},children:(0,V.jsx)(ce,{onClose:function(){Ue(!1),Be("")},addSectionHandler:function(e){if(!isNaN(+e))return f().fire("\uc800\uc7a5 \uc2e4\ud328","\uc22b\uc790\ub85c\ub9cc \uc774\ub8e8\uc5b4\uc9c4 \uc139\uc158\uc774\ub984\uc740 \ubd88\uac00\ub2a5\ud574\uc694!","warning"),!1;if(0===e.trim().length)return f().fire("\uc800\uc7a5 \uc2e4\ud328","\ube48\uce78\uc73c\ub85c \uc800\uc7a5\ud560 \uc218 \uc5c6\uc5b4\uc694! \uc139\uc158\uc758 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.","warning"),!1;var t=(0,i.Z)(be);if(t.includes(e))return f().fire("\uc800\uc7a5 \uc2e4\ud328","\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc139\uc158\uc774\ub984\uc785\ub2c8\ub2e4! \ud655\uc778\ud574\uc8fc\uc138\uc694!","warning"),!1;if(Oe){var n,r=null===(n=(0,i.Z)(ee))||void 0===n?void 0:n.map((function(t){return t.grid!==Oe?t:(0,z.Z)((0,z.Z)({},t),{},{grid:e})})),a=t.indexOf(Oe);t.splice(a,1,e),_e(t),te(r),y(r,t),Ue(!1),Be("")}else t.push(e),_e(t),y(ee,t)},delSectionHandler:function(e){f().fire({icon:"warning",title:"\uc139\uc158\uc744 \uc0ad\uc81c\ud560\uae4c\uc694?",text:"".concat(e," \uc81c\ubaa9\uc758 \uc139\uc158\uc744 \uc0ad\uc81c\ud560\uae4c\uc694? *(\uc8fc\uc758)* \uc0ad\uc81c\ud560 \uacbd\uc6b0 \uc139\uc158\uc5d0 \ud3ec\ud568\ub41c \ubaa8\ub4e0 \ub370\uc774\ud130\ub3c4 \ud568\uaed8 \uc0ad\uc81c\ub429\ub2c8\ub2e4."),confirmButtonText:"\ud655\uc778",showDenyButton:!0,denyButtonText:"\ucde8\uc18c",confirmButtonColor:"#85bd82"}).then((function(t){if(t.isConfirmed){var n,r,a,s=null===(n=(0,i.Z)(ee))||void 0===n?void 0:n.filter((function(t){return t.grid!==e}));s=null===(r=s)||void 0===r?void 0:r.map((function(e,t){return(0,z.Z)((0,z.Z)({},e),{},{id:String(t)})}));var o=null===(a=(0,i.Z)(be))||void 0===a?void 0:a.filter((function(t){return t!==e}));te(s),y(s,o),Ue(!1)}}))},existName:Oe})})}),Le&&(0,V.jsx)(W.Z,{onClose:function(){return Me(!1)},children:(0,V.jsx)(se.Z,{students:b,onClose:function(){localStorage.setItem("itemId","null"),Me(!1)},saveItemHandler:function(e,t){ut(e,t),t||Me(!1)},unSubmitStudents:qe.unSubmitStudents,item:qe,removeData:ct,setItemNull:function(){},isSubject:!1,clName:""})}),(0,V.jsxs)("div",{className:j,children:[w&&(0,V.jsx)("div",{children:(0,V.jsxs)("span",{className:P,onClick:function(){return Me((function(e){return!e}))},style:{fontSize:"1rem"},children:[(0,V.jsx)("i",{className:"fa-regular fa-square-check"}),"\xa0 \uc81c\ucd9cox \ubcf4\uae30"]})}),(0,V.jsxs)("div",{children:[(0,V.jsx)("span",{className:P,onClick:function(){return O((function(e){return!e}))},style:{fontSize:"1rem"},children:H?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("i",{className:"fa-solid fa-grip-vertical"}),"\xa0 \uc139\uc158\uc2a4\ud0c0\uc77c"]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)("i",{className:"fa-solid fa-grip"}),"\xa0 \uae30\ubcf8\uc2a4\ud0c0\uc77c"]})}),(0,V.jsxs)("span",{className:P,onClick:Z,style:{fontSize:"1rem"},children:[(0,V.jsx)("i",{className:"fa-solid fa-reply"})," \ub4a4\ub85c"]})]})]}),(0,V.jsx)("h1",{className:C,children:null===g||void 0===g?void 0:g.slice(10)}),0===ee.length&&(0,V.jsxs)("div",{style:{marginTop:"20vh",color:"gray"},children:[(0,V.jsx)("p",{children:"\uc790\ub8cc\uac00 \uc5c6\uc5b4\uc694!"})," ",(0,V.jsx)("br",{}),(0,V.jsx)("p",{children:' \uc624\ub978\ucabd \uc544\ub798\uc758 "+" \ubc84\ud2bc\uc744 \ub20c\ub7ec\uc11c '}),(0,V.jsx)("br",{}),(0,V.jsx)("p",{children:"\uc790\ub8cc\ub97c \ucd94\uac00\ud574\uc8fc\uc138\uc694."})]}),H&&(0,V.jsxs)(le.LB,{sensors:Y,collisionDetection:le.pE,onDragStart:tt,onDragEnd:nt,onDragCancel:it,children:[(0,V.jsx)($.Fo,{items:ee,strategy:$.U2,children:(0,V.jsx)(ae,{columns:Math.floor(R/280),children:null===ee||void 0===ee?void 0:ee.map((function(e){return(0,V.jsx)(re,{id:e.id,isTeacher:w,color:e.bgColor,data:e},e.id)}))})}),(0,V.jsx)(le.y9,{adjustScale:!0,style:{transformOrigin:"0 0 "},children:Ze&&L&&(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(ie,{id:L,color:{backgroundColor:null===ee||void 0===ee||null===(t=ee.filter((function(e){return e.id===L})))||void 0===t||null===(n=t[0])||void 0===n?void 0:n.bgColor},data:null===ee||void 0===ee||null===(c=ee.filter((function(e){return e.id===L})))||void 0===c?void 0:c[0],isTeacher:w,isDragging:!0})})})]}),!H&&(0,V.jsxs)(le.LB,{sensors:Y,collisionDetection:le.pE,onDragStart:tt,onDragEnd:nt,onDragCancel:it,onDragMove:function(e){var t,n,i,r,a,s=e.active,o=e.over;o&&null!==o&&void 0!==o&&null!==(t=o.data)&&void 0!==t&&t.current&&(!(null!==o&&void 0!==o&&null!==(n=o.data)&&void 0!==n&&null!==(i=n.current)&&void 0!==i&&null!==(r=i.sortable)&&void 0!==r&&null!==(a=r.items)&&void 0!==a&&a.includes(s.id))?isNaN(+o.id)?Ie(o.id):ee.forEach((function(e){e.id===o.id&&Ie(e.grid)})):Ie(null));M(e.active.id)},children:[(0,V.jsxs)("div",{className:x,children:[null===be||void 0===be?void 0:be.map((function(e){var t,n=null===ee||void 0===ee?void 0:ee.filter((function(t){return t.grid===e}));return 0===n.length&&(n=[{id:e,grid:e,bgColor:"",text:"",title:"",userInfo:"",createdAt:""}]),(0,V.jsx)($.Fo,{items:n,strategy:$.U2,onDragOver:function(){Ie(e)},children:(0,V.jsxs)(ae,{columns:1,"data-droppable-id":e,children:[(0,V.jsx)("div",{className:A,onClick:function(){Be(e),Ue(!0)},children:e}),null===(t=n)||void 0===t?void 0:t.map((function(e){return(0,V.jsx)(re,{id:e.id,isTeacher:w,color:e.bgColor,data:e},e.id)}))]})},e)})),w&&(0,V.jsx)("div",{className:A,style:{margin:"40px 20px 0 0",width:"30%"},onClick:function(){return Ue(!0)},children:"+"})]}),(0,V.jsx)(le.y9,{adjustScale:!0,style:{transformOrigin:"0 0 "},children:Ze&&L&&(0,V.jsx)(V.Fragment,{children:(0,V.jsx)(ie,{id:L,color:{backgroundColor:null===ee||void 0===ee||null===(d=ee.filter((function(e){return e.id===L})))||void 0===d||null===(v=d[0])||void 0===v?void 0:v.bgColor},data:null===ee||void 0===ee||null===(p=ee.filter((function(e){return e.id===L})))||void 0===p?void 0:p[0],isTeacher:w,isDragging:!0})})})]}),(0,V.jsx)("div",{children:(0,V.jsxs)("button",{className:D,onClick:function(){fe&&ve(!1),F(!0)},children:[" ","+"," "]})})]})},fe=function(e){var t,n=(0,o.useState)([]),i=(0,s.Z)(n,2),d=i[0],v=i[1],m=(0,o.useState)([]),x=(0,s.Z)(m,2),g=x[0],j=x[1],w=(0,o.useState)(""),N=(0,s.Z)(w,2),y=N[0],b=N[1],C=(0,o.useState)(""),T=(0,s.Z)(C,2),D=T[0],P=T[1],H=(0,o.useState)(!1),O=(0,s.Z)(H,2),B=O[0],A=O[1],L=(0,o.useState)(!1),M=(0,s.Z)(L,2),Y=M[0],J=M[1],q=(0,o.useState)(""),R=(0,s.Z)(q,2),z=R[0],Q=R[1],G=(0,o.useState)(e.students||[]),K=(0,s.Z)(G,2),X=K[0],$=K[1],ee=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b(n),e.setPadNameHandler(n),i=(0,u.JU)(l.wO,"padIt",n),(0,u.cf)(i,(function(t){var n,i,r,a,s,o,l=null===t||void 0===t||null===(n=t.data())||void 0===n?void 0:n.clName;l&&(Q(l),e.nowItemClName(l),$(null===t||void 0===t||null===(o=t.data())||void 0===o?void 0:o.students));v(null===t||void 0===t||null===(i=t.data())||void 0===i?void 0:i.datas),j(null===t||void 0===t||null===(r=t.data())||void 0===r?void 0:r.sectionNames),e.userUidHandler(null===t||void 0===t||null===(a=t.data())||void 0===a?void 0:a.userUid),A(!0),e.setPadPwHandler(null===t||void 0===t||null===(s=t.data())||void 0===s?void 0:s.pw),e.hidePadAdd(!0)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),te=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,i,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.JU)(l.wO,"padIt",t),e.next=3,(0,u.QT)(i);case 3:a=e.sent,s=null===(n=a.data())||void 0===n?void 0:n.pw,P(s),b(t),J(!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,V.jsxs)("div",{children:[Y&&(0,V.jsx)(W.Z,{onClose:function(){return J(!1)},children:(0,V.jsxs)("div",{className:Z,children:[(0,V.jsx)("h2",{className:S,children:null===y||void 0===y?void 0:y.slice(10)}),(0,V.jsx)(c.tv,{value:"https://checks-cho-ok.firebaseapp.com/padIt/".concat(y,"/").concat(D),size:"33vw",bgColor:"#ffffff",fgColor:"#000000",level:"L",includeMargin:!0})]})}),!B&&(0,V.jsx)(V.Fragment,{children:(0,V.jsx)("ul",{className:"".concat(U," ").concat(h),children:null===(t=e.roomNames)||void 0===t?void 0:t.map((function(e,t){return(0,V.jsx)("li",{className:F,children:(0,V.jsxs)("div",{className:Z,children:[(0,V.jsx)("span",{className:k,children:e.slice(10)}),(0,V.jsx)("span",{className:E,children:(0,V.jsx)(p,{date:e.slice(0,10)})}),(0,V.jsx)("hr",{style:{width:"90%",margin:"20px 5px"}}),(0,V.jsxs)("div",{className:_,children:[(0,V.jsx)("button",{onClick:function(){return ee(e)},className:I,children:"\uc785\uc7a5"}),(0,V.jsx)("button",{onClick:function(){te(e)},className:I,children:"qr\ucf54\ub4dc \ud655\uc778"})]})]})},t)}))})}),B&&(0,V.jsx)(de,{padName:y,padDatas:d,onClose:function(){f().fire({icon:"warning",title:"\ubaa9\ub85d\uc73c\ub85c \uc774\ub3d9",text:"\ud328\ub4dc\uc787 \ubaa9\ub85d\uc73c\ub85c \uc774\ub3d9\ud558\uc2dc\uaca0\uc5b4\uc694?",confirmButtonText:"\ud655\uc778",showDenyButton:!0,denyButtonText:"\ucde8\uc18c",confirmButtonColor:"#85bd82"}).then((function(t){t.isConfirmed&&(A(!1),e.hidePadAdd(!1))}))},userUid:e.userUid,students:X,padSectionNames:g,isTeacher:e.isTeacher,padDatasHandler:function(t,n){return e.padDatasHandler(t,n)},clName:z})]})},ve=function(e){var t,n=(0,o.useState)(null),c=(0,s.Z)(n,2),d=c[0],v=c[1],p=(0,o.useState)({}),x=(0,s.Z)(p,2),h=x[0],g=x[1],j=(0,o.useState)([]),N=(0,s.Z)(j,2),b=N[0],_=N[1],S=(0,o.useState)(!0),k=(0,s.Z)(S,2),F=k[0],T=k[1],D=(0,o.useState)(""),U=(0,s.Z)(D,2),H=U[0],O=U[1],B=(0,o.useRef)(),E=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(n,i,a){var s,o;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=(0,u.JU)(l.wO,"padIt","roomNames"),o=m()().format("YYYY-MM-DD")+n,(0,u.cf)(s,(function(t){var n,r,s;if(_(null===t||void 0===t||null===(n=t.data())||void 0===n?void 0:n.datas),null!==t&&void 0!==t&&null!==(r=t.data())&&void 0!==r&&null!==(s=r.datas)&&void 0!==s&&s.includes(o))g({}),v(!0);else{var l={name:o,pw:i};e.isSubject&&(l.clName=a),g(l),v(!1)}}));case 3:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}(),A=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var n,a,s,o,c,d,f;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=(0,i.Z)(b)).push(h.name),t.next=4,(0,u.r7)((0,u.JU)(l.wO,"padIt","roomNames"),{datas:o});case 4:return c=e.isSubject?null===(n=Object.values(null===(a=e.students)||void 0===a||null===(s=a.filter((function(e){return Object.keys(e)[0]===H})))||void 0===s?void 0:s[0]))||void 0===n?void 0:n[0]:e.students,d={datas:[],pw:h.pw,sectionNames:["0"],userUid:F?e.userUid:"",students:F?c:[]},e.isSubject&&(d.clName=H),t.next=9,(0,u.pl)((0,u.JU)(l.wO,"padIt",h.name),d);case 9:return(f=(0,i.Z)(e.roomNames)||[]).push(h.name),t.next=13,(0,u.pl)((0,u.JU)(l.wO,"padIt",e.userUid),{datas:f});case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,o.useEffect)((function(){null!==d&&(!0===d?f().fire("\ucd94\uac00 \uc2e4\ud328","\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ubc29\uc774\ub984\uc785\ub2c8\ub2e4. \ubc29\uc774\ub984\uc744 \ubcc0\uacbd\ud574\uc8fc\uc138\uc694.","warning"):!1===d&&(A(),e.onClose()))}),[d]),(0,V.jsx)(V.Fragment,{children:(0,V.jsxs)("div",{children:[e.isTeacher&&(0,V.jsx)("span",{className:P,style:{display:"flex",justifyContent:"flex-end"},onClick:function(){e.onClose()},children:(0,V.jsx)("i",{className:"fa-regular fa-circle-xmark"})}),(0,V.jsx)("p",{className:C,style:{textAlign:"center"},children:e.isTeacher?"\ud328\ub4dc\uc787 \ucd94\uac00":"\uc218\ub3d9\uc73c\ub85c \uc811\uc18d\ud558\uae30"}),(0,V.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n=t.target.roomName.value,i=t.target.roomPw.value;e.isSubject&&""===t.target.option.value.trim()||""!==n.trim()&&""!==i.trim()&&(i.trim().length<8?e.isTeacher?f().fire("\uc800\uc7a5 \uc2e4\ud328","\ubb38\uc790\uc640 \uc22b\uc790\ub97c \ud3ec\ud568\ud574 8\uc790\ub9ac \uc774\uc0c1\uc73c\ub85c \ub9cc\ub4e4\uc5b4\uc8fc\uc138\uc694.","warning"):f().fire("\uc811\uc18d \uc2e4\ud328","\ube44\ubc00\ubc88\ud638\uc758 \ubb38\uc790\uc640 \uc22b\uc790\ub97c \uc815\ud655\ud558\uac8c \uc785\ub825\ud574\uc8fc\uc138\uc694. \uc624\ub958\uac00 \ubc18\ubcf5\ub418\uba74 \uc120\uc0dd\ub2d8\uaed8 \ub3c4\uc6c0\uc744 \uc694\uccad\ud558\uc138\uc694.","warning"):e.isTeacher?e.isSubject?(E(n.trim(),i.trim(),t.target.option.value),O(t.target.option.value)):E(n.trim(),i.trim()):e.getPadDatasHandler(n.trim(),i.trim()))},className:Z,children:[e.isTeacher&&e.isSubject&&(0,V.jsx)("div",{className:w,children:(0,V.jsxs)("select",{name:"option",defaultValue:"",className:L,required:!0,children:[(0,V.jsx)("option",{value:"",children:"-\ud559\uae09 \uc120\ud0dd-"}),null===(t=e.students)||void 0===t?void 0:t.map((function(e,t){var n,i;return(0,V.jsxs)("option",{value:null===(n=Object.keys(e))||void 0===n?void 0:n[0],children:[" ",null===(i=Object.keys(e))||void 0===i?void 0:i[0]]},t)}))]})}),(0,V.jsxs)("div",{className:w,children:[(0,V.jsx)("label",{name:"roomName",className:w,children:"\ubc29 \uc774\ub984"}),(0,V.jsx)("input",{type:"text",name:"roomName",required:!0,placeholder:e.isTeacher?"\uc811\uc18d\ud560 \ubc29\uc774\ub984(\uc804\ub2f4\uc740 \ud559\uae09\ub123\uae30!)":"\uc811\uc18d\ud560 \ubc29\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694.",className:y,autoFocus:!0})]}),(0,V.jsxs)("div",{className:w,children:[(0,V.jsx)("label",{name:"roomPw",className:w,children:"\ube44\ubc00\ubc88\ud638"}),(0,V.jsx)("input",{type:"text",name:"roomPw",required:!0,placeholder:e.isTeacher?"8\uc790\ub9ac\uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694.":"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694.",className:y})]}),e.isTeacher&&(0,V.jsx)("div",{className:w,style:{justifyContent:"center"},children:(0,V.jsxs)("li",{className:M,children:["* [\uc0dd\uae30\ubd80] - [\uc81c\ucd9cox] \uc5f0\ub3d9 \xa0\xa0",(0,V.jsx)("input",{type:"checkbox",id:"toggle",hidden:!0}),(0,V.jsx)("label",{htmlFor:"toggle",className:F?"".concat(Y," ").concat(q):"".concat(Y),onClick:function(){T((function(e){return!e}))},ref:B,children:(0,V.jsx)("span",{className:J})})]})}),(0,V.jsx)("div",{className:w,children:(0,V.jsx)("input",{type:"submit",value:e.isTeacher?"\ucd94\uac00\ud558\uae30":"\uc811\uc18d\ud558\uae30",style:{minWidth:"380px"},className:I})})]})]})})},me=function(e){var t=(0,o.useState)(!1),n=(0,s.Z)(t,2),c=n[0],d=n[1],v=(0,o.useState)([]),p=(0,s.Z)(v,2),x=p[0],h=p[1],g=(0,o.useState)([]),j=(0,s.Z)(g,2),Z=j[0],w=j[1],N=(0,o.useState)(""),y=(0,s.Z)(N,2),b=y[0],_=y[1],S=(0,o.useState)(""),k=(0,s.Z)(S,2),F=k[0],T=k[1],D=(0,o.useState)(""),U=(0,s.Z)(D,2),P=U[0],H=U[1],O=(0,o.useState)([]),B=(0,s.Z)(O,2),E=B[0],A=B[1],L=(0,o.useState)(!1),M=(0,s.Z)(L,2),Y=M[0],J=M[1],q=(0,o.useState)(!1),R=(0,s.Z)(q,2),z=R[0],Q=R[1],G=(0,o.useState)(!0),K=(0,s.Z)(G,2),X=K[0],$=K[1],ee=(0,o.useState)([]),te=(0,s.Z)(ee,2),ne=te[0],ie=te[1],re=(0,o.useState)({}),ae=(0,s.Z)(re,2),se=ae[0],oe=ae[1],le=(0,o.useState)(!1),ue=(0,s.Z)(le,2),ce=ue[0],me=ue[1],pe=(0,o.useState)(""),xe=(0,s.Z)(pe,2),he=xe[0],ge=xe[1];(0,o.useEffect)((function(){e.userUid&&d(!0)}),[e.userUid]),(0,o.useEffect)((function(){var t,n,i,r=Ze();me(null===(t=e.isSubject)||void 0===t||null===(n=t.filter((function(e){return Object.keys(e)[0]===r})))||void 0===n||null===(i=n[0])||void 0===i?void 0:i[r])}),[e.isSubject]),(0,o.useEffect)((function(){}),[ce]);var je=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,u.JU)(l.wO,"padIt",e.userUid),(0,u.cf)(n,(function(e){var t;e.exists()&&A(null===(t=e.data())||void 0===t?void 0:t.datas)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();(0,o.useEffect)((function(){c&&je()}),[c]),(0,o.useEffect)((function(){if(e.students){var t,n,i,r=Ze(),a=null===(t=e.students)||void 0===t||null===(n=t.filter((function(e){return Object.keys(e)[0]===r})))||void 0===n||null===(i=n[0])||void 0===i?void 0:i[r];ie(a)}}),[e.students]);var Ze=function(){return+m()().format("MM")<=2?String(+m()().format("YYYY")-1):m()().format("YYYY")},we=function(){f().fire("\uc811\uc18d \uc2e4\ud328","\ubc29\uc774\ub984\uacfc \ube44\ubc00\ubc88\ud638\ub97c \ud655\uc778\ud558\uace0, \ub2e4\uc2dc \uc811\uc18d\ud574\uc8fc\uc138\uc694!","warning")},Ne=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,u.JU)(l.wO,"padIt",t),e.next=3,(0,u.QT)(a);case 3:if(s=e.sent,document.querySelector("nav").style.display="none",!s.exists()){e.next=18;break}if((null===s||void 0===s||null===(o=s.data())||void 0===o?void 0:o.pw)===n){e.next=11;break}return we(),e.abrupt("return",!1);case 11:f().fire("\uc811\uc18d \uc131\uacf5","".concat(t," \uc5d0 \uc811\uc18d\uc774 \uc131\uacf5\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc624\ub978\ucabd \ud558\ub2e8\uc758 + \ubc84\ud2bc\uc73c\ub85c \uba54\ubaa8\ub97c \ucd94\uac00\ud574\ubcf4\uc138\uc694."),"success"),_(t),T(n);case 14:(0,u.cf)(a,(function(e){var t,n,r,a,s;h(null===e||void 0===e||null===(t=e.data())||void 0===t?void 0:t.datas),w(null===e||void 0===e||null===(n=e.data())||void 0===n?void 0:n.sectionNames),ge(null===e||void 0===e||null===(r=e.data())||void 0===r?void 0:r.clName),ie((0,i.Z)(null===e||void 0===e||null===(a=e.data())||void 0===a?void 0:a.students)),H(null===e||void 0===e||null===(s=e.data())||void 0===s?void 0:s.userUid)})),$(!1),e.next=19;break;case 18:we();case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){var t,n;if(e.padItInfo&&!(null!==(t=Object.values(e.padItInfo))&&void 0!==t&&t.includes("undefined")||null!==(n=Object.values(e.padItInfo))&&void 0!==n&&n.includes(void 0))){var i=e.padItInfo.roomName,r=e.padItInfo.roomPw;Ne(i,r)}}),[e.padItInfo]);var ye=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a,s,o,c,d,f,v,p,x,h,g,j,Z;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,u.JU)(l.wO,"checkLists",t),e.next=3,(0,u.QT)(s);case 3:o=e.sent,c=(0,i.Z)(null===o||void 0===o||null===(a=o.data())||void 0===a?void 0:a.checkLists_data)||[],d={},f=0,null===c||void 0===c||c.forEach((function(e,t){(null===e||void 0===e?void 0:e.title)===b&&(f=t,d=e)})),v=[],p=null===n||void 0===n?void 0:n.map((function(e){return null===e||void 0===e?void 0:e.title})),0===f?(null===(j=ce?null===(h=Object.values(null===ne||void 0===ne||null===(g=ne.filter((function(e){return Object.keys(e)[0]===he})))||void 0===g?void 0:g[0]))||void 0===h?void 0:h[0]:ne)||void 0===j||j.forEach((function(e){var t=!1;p.forEach((function(n){n.includes(e.name)&&(t=!0)})),t||v.push(e)})),x={id:b.slice(0,10)+m()().format(" HH:mm:ss"),title:b,unSubmitStudents:v,yearGroup:Ze()},he&&(x.clName=he),c.push(x)):(v=(0,i.Z)(d.unSubmitStudents),v=null===(Z=v)||void 0===Z?void 0:Z.filter((function(e){var t=!1;return p.forEach((function(n){n.includes(e.name)&&(t=!0)})),!t})),x={id:d.id,title:d.title,unSubmitStudents:v,yearGroup:Ze()},he&&(x.clName=he),c.splice(f,1,x)),oe({uid:t,data:c});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.pl)((0,u.JU)(l.wO,"checkLists",t),{checkLists_data:n});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){se.uid&&se.data&&be(se.uid,se.data)}),[se]);var _e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var i,a,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,u.JU)(l.wO,"padIt",b),a={datas:t,pw:F,sectionNames:n,userUid:P,students:ne},he&&(a.clName=he,a.students=null===(s=Object.values(null===ne||void 0===ne||null===(o=ne.filter((function(e){return Object.keys(e)[0]===he})))||void 0===o?void 0:o[0]))||void 0===s?void 0:s[0]),e.next=5,(0,u.pl)(i,a);case 5:""!==P&&ye(P,t);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,V.jsx)(V.Fragment,{children:c?(0,V.jsxs)("div",{style:{marginTop:"-80px"},children:[Y&&(0,V.jsx)(W.Z,{onClose:function(){return J(!1)},children:(0,V.jsx)(ve,{onClose:function(){return J(!1)},userUid:e.userUid,roomNames:E,isTeacher:c,students:ne,isSubject:ce})}),!z&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("h2",{className:C,style:{marginLeft:"43px"},children:[" ","\ud328\ub4dc\uc787 \ud83d\udccc"]}),(0,V.jsx)("p",{children:"\ub2f4\uc784\uad50\uc0ac\uc6a9 \ucd08\uae30\ubc84\uc804\uc774 \uac1c\ubc1c\uc911\uc785\ub2c8\ub2e4. \ud14c\uc2a4\ud2b8\ub9cc \ucd94\ucc9c\ub4dc\ub9bd\ub2c8\ub2e4. (\uc804\ub2f4\uad50\uc0ac\uc6a9 \uac1c\ubc1c\uc608\uc815...)"}),(0,V.jsx)("button",{onClick:function(){return J(!0)},className:I,children:"\ud328\ub4dc \ucd94\uac00\ud558\uae30"})]}),(0,V.jsx)(fe,{roomNames:E,hidePadAdd:function(e){return Q(e)},isTeacher:c,userUid:e.userUid,padDatasHandler:_e,userUidHandler:function(e){H(e)},students:ne,setPadPwHandler:function(e){return T(e)},setPadNameHandler:function(e){return _(e)},nowItemClName:function(e){return ge(e)}})]}):(0,V.jsxs)(V.Fragment,{children:[X&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("h2",{className:C,style:{marginLeft:"43px"},children:[" ","\ud328\ub4dc\uc787 \ud83d\udccc"]}),(0,V.jsx)("p",{children:"\uac1c\ubc1c\uc911\uc785\ub2c8\ub2e4. \ud604\uc7ac\ub294 \uc791\uc131\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4."}),(0,V.jsx)(ve,{onClose:function(){return $(!1)},isTeacher:c,getPadDatasHandler:Ne})]}),!X&&(0,V.jsx)(de,{padName:b,padDatas:x,userUid:e.userUid,padSectionNames:Z,onClose:function(){f().fire({icon:"warning",title:"\uc218\ub3d9 \uc785\ub825\uc73c\ub85c",text:"\ud328\ub4dc\uc787 \uc218\ub3d9 \uc785\ub825\ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud560\uae4c\uc694? \uc774\ub3d9\ud558\uba74 \uc9c1\uc811 \ubc29\uc774\ub984\uacfc \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc57c \ud569\ub2c8\ub2e4!",confirmButtonText:"\ud655\uc778",showDenyButton:!0,denyButtonText:"\ucde8\uc18c",confirmButtonColor:"#85bd82"}).then((function(e){e.isConfirmed&&$(!0)}))},students:ne,padDatasHandler:_e})]})})}}}]);