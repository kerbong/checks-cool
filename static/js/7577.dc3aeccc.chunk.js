"use strict";(self.webpackChunkchecks_cool=self.webpackChunkchecks_cool||[]).push([[7577],{5729:(e,t,a)=>{a.d(t,{Z:()=>o});var l=a(7313);const s="FileArea_fileArea__MQmcW",i="FileArea_a__PHHp8",n="FileArea_img__qKac6";var d=a(7785),r=a(6417);const o=e=>{const[t,a]=(0,l.useState)(e.file||""),[o,c]=(0,l.useState)(!1);return(0,r.jsxs)("div",{className:s,children:[t&&!o?(0,r.jsx)("img",{src:t,alt:"filePreview",onError:()=>{c(!0)},className:n}):t&&(0,r.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:i,children:"\ud30c\uc77c \ub2e4\uc6b4\ubc1b\uae30"}),"attendance"!==e.about&&(0,r.jsx)(d.Z,{attachedFileHandler:t=>{e.attachedFileHandler(t),a(t)},src:t,about:e.about})]})}},7785:(e,t,a)=>{a.d(t,{Z:()=>o});var l=a(7313);const s="FileForm_fileUploadBtn__r9msD";var i=a(2964),n=a(7114),d=a.n(n),r=a(6417);const o=e=>{const[t,a]=(0,l.useState)(e.src||"");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("label",{id:"attachedFile",htmlFor:"attachFile",className:s,onClick:()=>{t&&a("")},style:"padIt"===e.about?{backgroundColor:"#687f7f"}:{},children:["meetSum"===e.about&&(0,r.jsx)(r.Fragment,{children:t?"\ucd08\uae30\ud654 & \ud30c\uc77c \ubcc0\uacbd":"\ud30c\uc77c \ucd94\uac00"}),"meetSum"!==e.about&&(0,r.jsx)(r.Fragment,{children:t?"\ucd08\uae30\ud654 & \uc774\ubbf8\uc9c0 \ubcc0\uacbd":"\uc774\ubbf8\uc9c0 \ucd94\uac00"})]}),(0,r.jsx)("input",{type:"file",accept:".pdf,.hwp,.xls,.xlsx,image/*",onChange:async t=>{const l=t.target.files[0];if(l){const s=new FileReader;if(s.onloadend=t=>{a(t.currentTarget.result),e.attachedFileHandler(t.currentTarget.result)},l.type.startsWith("image/")){const e=await(async e=>{try{const t=5,a=["application/pdf","application/x-hwp","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"];if(e.size<=1024*t*1024&&a.includes(e.type))return e;{const t={maxSizeMb:2,maxWidthOrHeight:1920};return await(0,i.Z)(e,t)}}catch(t){console.log(t),d().fire("\uc5c5\ub85c\ub4dc \uc2e4\ud328","\uc5c5\ub85c\ub4dc\uc5d0 \ubb38\uc81c\uac00 \uc0dd\uacbc\uc2b5\ub2c8\ub2e4. \ud30c\uc77c\uc758 \ud06c\uae30\uac00 5Mb \uc774\uc0c1\uc774\uac70\ub098 \ucc98\ub9ac \uacfc\uc815\uc5d0 \ubb38\uc81c\uac00 \uc0dd\uae38 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ubbf8\uc9c0 \ud30c\uc77c\ub85c \uc5c5\ub85c\ub4dc \ud558\uc2dc\uba74 \ud3b8\ub9ac\ud569\ub2c8\ub2e4.","warning")}})(l);s.readAsDataURL(e)}else s.readAsDataURL(l)}},style:{display:"none"},id:"attachFile"})]})}},7577:(e,t,a)=>{a.r(t),a.d(t,{default:()=>xe});var l=a(7313),s=a(650),i=a(573),n=a(1095),d=a(7114),r=a.n(d),o=a(658),c=a.n(o);const u=e=>{let{date:t}=e;const a=c()(),l=c()(t),s=a.diff(l,"day"),i=a.diff(l,"month");let n="";return n=s<0?"\ubbf8\ub798??":s<1?"\uc624\ub298":1===s?"\uc5b4\uc81c":i<1?"".concat(s,"\uc77c \uc804"):"".concat(i,"\ub2ec \uc804"),n},m="PadIt_flex-center__7siD7",v="PadIt_flex-center-wrap__sohPC",x="PadIt_flex-center-all__tf081",h="PadIt_flex-end__ges3F",p="PadIt_flex-col-center__NwjrM",f="PadIt_margin10__CxXXZ",j="PadIt_margin10-wid95__LA37d",g="PadIt_minwid-250__N2eKM",y="PadIt_memoAdd-input__5s-Z5",w="PadIt_flex-around-80__-SPun",N="PadIt_fs-2rem__BA7cq",_="PadIt_fs-17rem__Kz9qD",b="PadIt_fs-14rem__X5YiX",S="PadIt_margin-10-0-5-0__s5t9s",C="PadIt_padRoomPw-p__cjwZZ",I="PadIt_li-btn__H2oTP",k="PadIt_li__kanMp",F="PadIt_bgcolor-div__Q+TKl",D="PadIt_del-btn__8I4lv",U="PadIt_add-btn__eIGk7",T="PadIt_ul__FLabr",P="PadIt_closeBtn__3UWNS",H="PadIt_color-area__TaUDy",B="PadIt_color-area-clicked__atu9R",O="PadIt_ex-title__+RnlZ",E="PadIt_color-span__Jat76",A="PadIt_date__ah4LB",L="PadIt_section-title__xW2gm",M="PadIt_select__9wQjw",Y="PadIt_dropdown-li-nonehover__XckCB",J="PadIt_toggleSwitch__BY1fu",Z="PadIt_toggleButton__6z0JP",q="PadIt_active__w3DKR",R="PadIt_previewImg__iWeUh",z="PadIt_explainDiv__N3zOA",W="PadIt_explainDivHide__4gcc5";var Q=a(3451),K=a(4484),G=a(5729),V=a(2050),X=a(6417);const $=["#FFACAC","#FFD9AC","#FFFFAC","#BDFFAC","#ACDEFF","#C8ACFF","#FFFFFF"],ee=e=>{let{onClose:t,delMemoHandler:a,addMemoHandler:s,nowMemo:i,data:n,isTeacher:d,gridTemplate:o,sectionNames:c,isSaving:u,lockHandler:m}=e;const[v,h]=(0,l.useState)("#FFACAC"),[f,g]=(0,l.useState)(!1),[w,N]=(0,l.useState)(""),[_,b]=(0,l.useState)((null===n||void 0===n?void 0:n.lock)||!1),S=(0,l.useRef)();(0,l.useEffect)((()=>{i&&(g(!0),h(i.bgColor))}),[i]);const C=(e,t)=>{var a,l;e.target.value.length>t&&(e.target.value=e.target.value.substr(0,t),a="\uc785\ub825 \ubd88\uac00",l="\uae00\uc790\uc218\ub97c \ucd08\uacfc\ud588\uc5b4\uc694! \ub0b4\uc6a9\uc744 ".concat(t,"\uc790 \uc774\ub0b4\ub85c \uc904\uc5ec\uc8fc\uc138\uc694."),r().fire({icon:"error",title:a,text:l,confirmButtonText:"\ud655\uc778",confirmButtonColor:"#85bd82",timer:5e3}))};(0,l.useEffect)((()=>{n&&(g(!0),h(n.bgColor))}),[n]),(0,l.useEffect)((()=>{f&&(document.querySelector(".modal").style.backgroundColor=v)}),[f]);const k=(e,t)=>{let a=null===e||void 0===e?void 0:e.match(/https?:\/\/[^\s]+/g),l=e;var s;t&&a?(l=a.join("\n"),l=null===(s=l)||void 0===s?void 0:s.replace(/https?:\/\/[^\s]+/g,"<a href=".concat(l,' target="_blank">').concat(l,"</a>"))):t&&!a&&(l="");return l};return(0,l.useEffect)((()=>{f&&m({...n,lock:_})}),[_]),(0,X.jsx)(X.Fragment,{children:(0,X.jsxs)("div",{children:[(0,X.jsx)("span",{className:P,style:{display:"flex",justifyContent:"flex-end",right:"0px"},onClick:()=>{t()},children:(0,X.jsx)(V.zu6,{})}),(0,X.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u||(f?s(e,v,w,n):s(e,v,w))},className:p,children:[(!n||d||n.userInfo===localStorage.getItem("padUserInfo"))&&(0,X.jsxs)(X.Fragment,{children:[!o&&(0,X.jsx)("div",{className:j,children:(0,X.jsxs)("select",{name:"option",defaultValue:(null===n||void 0===n?void 0:n.grid)||"",className:M,children:[(0,X.jsx)("option",{value:"",children:"-\uc139\uc158 \uc120\ud0dd-"}),null===c||void 0===c?void 0:c.map(((e,t)=>(0,X.jsxs)("option",{value:e,children:[" ",e]},t)))]})}),(0,X.jsx)("div",{className:j,children:(0,X.jsx)("input",{type:"text",name:"title",required:!0,placeholder:d?"\uc81c\ubaa9":"\uc131\uacfc \uc774\ub984\uc744 \ud3ec\ud568\ud55c \uc81c\ubaa9 (\uc608 - \uae40\uc9c0\uc218 \uc785\ub2c8\ub2e4)",title:"\uc81c\ubaa9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",className:y,autoFocus:!0,defaultValue:n?n.title:""})}),(0,X.jsx)("hr",{style:{width:"96%",margin:"13px"}}),(0,X.jsxs)("div",{className:j,children:[(0,X.jsx)(K.Z,{myKey:"text-input",className:"memoAdd-textarea",label:"insteadText",input:{name:"text",type:"textarea",required:!0},onInput:e=>C(e,500),required:!0,placeholder:"\ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",defaultValue:n?n.text:""}),n&&(0,X.jsx)("span",{ref:S,style:{wordBreak:"break-all"},dangerouslySetInnerHTML:{__html:k(n.text,!0)}}),(0,X.jsx)("p",{children:"* \ub9c1\ud06c\uc8fc\uc18c\ub97c \ubd99\uc5ec\ub123\uc740 \ud6c4\uc5d0\ub294 \ud55c \uce78\uc744 \ub744\uc6cc\uc8fc\uc138\uc694!"})]}),(0,X.jsx)("div",{className:j,style:{justifyContent:"center"},children:(0,X.jsx)(G.Z,{about:"padIt",attachedFileHandler:e=>{N(e)},file:(null===n||void 0===n?void 0:n.fileUrl)||""})}),(0,X.jsxs)("div",{className:j,style:{justifyContent:"space-between"},children:[(0,X.jsxs)("div",{className:"".concat(x," ").concat(F," "),children:[(0,X.jsx)("span",{className:E,children:"\ubc30\uacbd"}),$.map(((e,t)=>(0,X.jsx)("span",{onClick:()=>h(e),className:v!==e?H:B,style:{backgroundColor:e}},t)))]}),f&&(0,X.jsx)("input",{type:"button",name:"delete",value:"\uc0ad\uc81c",className:I,onClick:e=>{u||a(n)}}),(0,X.jsx)("button",{title:_?"\uacf5\uac1c\ub85c \ubc14\uafb8\uae30":"\ube44\ubc00\ub85c \ubc14\uafb8\uae30",className:I,onClick:e=>{e.preventDefault(),b((e=>!e))},children:_?(0,X.jsx)(V.kUi,{}):(0,X.jsx)(V.jcU,{})}),(0,X.jsx)("input",{type:"submit",value:f?"\uc218\uc815":"\ucd94\uac00",className:I})]})]}),n&&!d&&n.userInfo!==localStorage.getItem("padUserInfo")&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("div",{className:j,style:{fontSize:"1.5rem",padding:"15px"},children:n.title}),(0,X.jsx)("hr",{style:{width:"96%",margin:"13px"}}),(0,X.jsx)("div",{className:j,style:{fontSize:"1.3rem",padding:"15px"},children:(0,X.jsx)("span",{ref:S,style:{wordBreak:"break-all"},dangerouslySetInnerHTML:{__html:k(n.text,!1)}})}),(null===n||void 0===n?void 0:n.fileUrl)&&(0,X.jsx)("div",{className:j,style:{justifyContent:"center"},children:(0,X.jsx)("img",{src:w,className:R,alt:"filePreview"})})]})]})]})})};var te=a(4636),ae=a(790);const le=(0,l.forwardRef)(((e,t)=>{let{withOpacity:a,isDragging:l,style:s,data:i,isTeacher:n,...d}=e;const r=isNaN(+i.id)?{maxWidth:"250px",width:"80%",borderRadius:"10px",padding:"20px 10px",...s,backgroundColor:"#ffffff"}:{opacity:a?"0.5":"1",transformOrigin:"50% 50%",height:"auto",maxWidth:"230px",width:"80%",borderRadius:"10px",padding:"20px 10px",cursor:l?"grabbing":"grab",backgroundColor:"#ffffff",display:"flex",justifyContent:"center",alignItems:"center",boxShadow:l?"rgb(63 63 68 / 5%) 0px 2px 0px 2px, rgb(34 33 81 / 15%) 0px 2px 3px 2px":"rgb(63 63 68 / 5%) 0px 0px 0px 1px, rgb(34 33 81 / 15%) 0px 1px 3px 0px",transform:l?"scale(1.15)":"scale(1)",...s},o=(c=null===i||void 0===i?void 0:i.text,u=50,(null===c||void 0===c?void 0:c.length)>u?(null===c||void 0===c?void 0:c.substring(0,u))+"...":c);var c,u;return(0,X.jsx)("div",{ref:t,style:r,...d,children:isNaN(+i.id)?(0,X.jsx)("div",{className:p,style:{width:"90%"}}):(0,X.jsxs)("div",{className:p,style:{width:"90%",height:"auto"},children:[(0,X.jsx)("span",{className:b,children:i.title}),n&&(0,X.jsx)("span",{className:A,children:i.createdAt}),(0,X.jsx)("hr",{style:{width:"100%",margin:"20px 5px"}}),(0,X.jsx)("span",{style:{wordBreak:"break-all"},children:null===i||void 0===i||!i.lock||n||i.userInfo===localStorage.getItem("padUserInfo")?o:"\ube44\ubc00\uae00(\uc120\uc0dd\ub2d8\uacfc \uc791\uc131\ud55c \ud559\uc0dd\ub9cc \ubcfc \uc218 \uc788\uc5b4\uc694.)"})]})})})),se=(0,l.forwardRef)(((e,t)=>{const{isDragging:a,attributes:l,listeners:s,setNodeRef:i,transform:n,transition:d}=(0,te.nB)({id:e.id}),r={transform:ae.ux.Transform.toString(n),transition:d||void 0,backgroundColor:e.color,height:a?"100px":"auto"};return(0,X.jsx)(le,{ref:i,style:r,withOpacity:a,...e,...l,...s})})),ie=e=>{let{children:t,columns:a,styles:l}=e;return(0,X.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(a,", 1fr)"),gridGap:10,width:"95%",margin:"40px auto",justifyItems:"center",alignItems:"start",height:"max-content",...l},children:t})};var ne=a(7731),de=a(6797),re=a(7753),oe=a(5162);const ce=e=>{let{onClose:t,addSectionHandler:a,existName:s,delSectionHandler:i}=e;const[n,d]=(0,l.useState)(s||"");return(0,X.jsxs)("div",{children:[(0,X.jsx)("span",{className:P,style:{display:"flex",justifyContent:"flex-end"},onClick:()=>{t()},children:(0,X.jsx)(V.zu6,{})}),(0,X.jsx)("form",{onSubmit:e=>{e.preventDefault(),0!==n.trim().length&&a(n)},className:p,children:(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("div",{className:L,style:{backgroundColor:"inherit"},children:s?"\uc139\uc158\uc774\ub984 \uc218\uc815\ud558\uae30":"\uc139\uc158 \ucd94\uac00\ud558\uae30"}),(0,X.jsx)("hr",{style:{width:"96%",margin:"13px"}}),(0,X.jsxs)("div",{className:j,style:{justifyContent:"center"},children:[(0,X.jsx)("input",{type:"text",required:!0,placeholder:"\uc0c8\ub85c \ucd94\uac00\ud560 \uc139\uc158\uc758 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",className:y,style:{width:"80%",textAlign:"center"},autoFocus:!0,onChange:e=>{let{value:t}=e.target;d(t)},value:n}),(0,X.jsx)("p",{children:s?"* \uc0ad\uc81c \ubc84\ud2bc\uc744 \ub204\ub974\uc2dc\uba74, \ud604\uc7ac \uc139\uc158\uc758 \ubaa8\ub4e0 \ub370\uc774\ud130\ub3c4 \uc0ad\uc81c\ub429\ub2c8\ub2e4.":"* \ucd94\uac00 \ubc84\ud2bc\uc744 \ub204\ub974\uc2dc\uba74, \ubc14\ub85c \uc139\uc158\uc774 \ucd94\uac00\ub429\ub2c8\ub2e4."})]}),(0,X.jsxs)("div",{className:j,style:s?{justifyContent:"space-between"}:{justifyContent:"end"},children:[s&&(0,X.jsx)("input",{type:"button",name:"delete",value:"\uc0ad\uc81c",className:I,onClick:e=>{i(s)}}),(0,X.jsx)("input",{type:"submit",value:s?"\uc218\uc815":"\ucd94\uac00",className:I})]})]})})]})},ue=e=>{var t,a,n,d,o,u;let{padDatas:v,padName:x,onClose:p,isTeacher:f,padSectionNames:j,padDatasHandler:g,students:y,userUid:w,clName:N}=e;const[b,S]=(0,l.useState)(!1),[C,I]=(0,l.useState)(!0),[k,F]=(0,l.useState)(null),D=(0,re.Dy)((0,re.VT)(re.MA),(0,re.VT)(re.LO)),[T,H]=(0,l.useState)(window.innerWidth),[B,O]=(0,l.useState)([]),[E,A]=(0,l.useState)(!1),[M,Y]=(0,l.useState)({}),[J,Z]=(0,l.useState)(!1),[q,R]=(0,l.useState)([]),[z,W]=(0,l.useState)(null),[K,G]=(0,l.useState)(!1),[$,ae]=(0,l.useState)(""),[ue,me]=(0,l.useState)(!1),[ve,xe]=(0,l.useState)({}),[he,pe]=(0,l.useState)([]),[fe,je]=(0,l.useState)(!1);(0,l.useEffect)((()=>{const e=()=>{H(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),(0,l.useEffect)((()=>{0===j.length?R(["0"]):R(j)}),[j]),(0,l.useEffect)((()=>{0!==v.length&&O(v)}),[v]);const ge=(0,l.useRef)(0),ye=(0,l.useCallback)((e=>{ge.current=Date.now(),Z(!1),F(e.active.id)}),[]),we=e=>{var t;const a=Date.now()-ge.current,l=null===B||void 0===B||null===(t=B.filter((t=>t.id===e.active.id)))||void 0===t?void 0:t[0];if(10<a&&a<300){if(null!==l&&void 0!==l&&l.lock&&!f&&l.userInfo!==localStorage.getItem("padUserInfo"))return;Y(l),A(!0)}else{var s;A(!1),Y({}),Z(!0);let t=localStorage.getItem("padUserInfo");if(!f&&t!==l.userInfo)return;e.active.id!==(null===(s=e.over)||void 0===s?void 0:s.id)&&O(z?t=>{let a=null===t||void 0===t?void 0:t.map((t=>t.id!==e.active.id?t:{...t,grid:z}));return g(a,q),a}:t=>{const a=t.findIndex((t=>t.id===e.active.id)),l=t.findIndex((t=>{var a;return t.id===(null===(a=e.over)||void 0===a?void 0:a.id)}));let s=(0,te.Rp)(t,a,l);return g(s,q),s})}F(null)},Ne=(0,l.useCallback)((()=>{F(null)}),[]),_e=async(e,t,a,l)=>{e.preventDefault();let i=e.target.title.value,n=e.target.text.value,d=C?"":e.target.option.value;if(""===(null===i||void 0===i?void 0:i.trim())||""===(null===n||void 0===n?void 0:n.trim()))return;if(!C&&""===(null===d||void 0===d?void 0:d.trim()))return;je(!0);let r,o,u,m="";if(""!==a){const e=await(0,de.sf)((0,de.iH)(s.Hw,"".concat(w,"/").concat((0,oe.Z)())),a,"data_url");m=await(0,de.Jt)(e.ref)}let v=C?"0":d;if(l){o={title:i,text:n,userInfo:l.userInfo,createdAt:c()().format("MM-DD HH:mm"),bgColor:t,grid:v,id:l.id,fileUrl:m,lock:(null===l||void 0===l?void 0:l.lock)||!1},u=[...B];let e=u.findIndex((e=>e.id===l.id));u.splice(e,1,o),A(!1)}else r=localStorage.getItem("padUserInfo"),r||(r=(0,oe.Z)(),localStorage.setItem("padUserInfo",r)),o={title:i,text:n,userInfo:r,createdAt:c()().format("MM-DD HH:mm"),bgColor:t,grid:v,id:String(B.length),fileUrl:m,lock:(null===l||void 0===l?void 0:l.lock)||!1},S(!1),u=[...B],u.push(o);O(u),g(u,q),je(!1)};(0,l.useEffect)((()=>{}),[z]);(0,l.useEffect)((()=>{f&&""!==w&&(async()=>{let e=(0,i.JU)(s.wO,"checkLists",w);(0,i.cf)(e,(e=>{var t;let a=[...null===e||void 0===e||null===(t=e.data())||void 0===t?void 0:t.checkLists_data]||[],l={};null===a||void 0===a||a.forEach((e=>{(null===e||void 0===e?void 0:e.title)===x&&(l=e)})),pe(a),xe(l)}))})()}),[f]);const be=()=>c()().format("MM-DD")<="02-15"?String(+c()().format("YYYY")-1):c()().format("YYYY");return(0,X.jsxs)("div",{children:[b&&(0,X.jsx)(Q.Z,{onClose:()=>S(!1),children:(0,X.jsx)(ee,{onClose:()=>S(!1),addMemoHandler:_e,gridTemplate:C,sectionNames:q,isSaving:fe})}),E&&(0,X.jsx)(Q.Z,{onClose:()=>A(!1),children:(0,X.jsx)(ee,{onClose:()=>A(!1),data:M,isTeacher:f,addMemoHandler:_e,delMemoHandler:async e=>{r().fire({icon:"warning",title:"\uba54\ubaa8\ub97c \uc0ad\uc81c\ud560\uae4c\uc694?",text:"".concat(e.title," \uc81c\ubaa9\uc758 \uba54\ubaa8\ub97c \uc0ad\uc81c\ud560\uae4c\uc694?"),confirmButtonText:"\ud655\uc778",showDenyButton:!0,denyButtonText:"\ucde8\uc18c",confirmButtonColor:"#85bd82"}).then((t=>{if(t.isConfirmed){var a,l;je(!0),""!==e.fileUrl&&(async e=>{await(0,de.oq)((0,de.iH)(s.Hw,e))})(e.fileUrl);let t=[...B];t=null===(a=t)||void 0===a?void 0:a.filter((t=>t.id!==e.id)),t=null===(l=t)||void 0===l?void 0:l.map(((e,t)=>({...e,id:String(t)}))),O(t),g(t,q),A(!1),je(!1)}}))},gridTemplate:C,sectionNames:q,isSaving:fe,lockHandler:e=>{let t=[...B],a=t.findIndex((t=>t.id===e.id));t.splice(a,1,e),O(t),g(t,q)}})}),K&&(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(Q.Z,{onClose:()=>{G(!1),ae("")},children:(0,X.jsx)(ce,{onClose:()=>{G(!1),ae("")},addSectionHandler:e=>{if(!isNaN(+e))return r().fire("\uc800\uc7a5 \uc2e4\ud328","\uc22b\uc790\ub85c\ub9cc \uc774\ub8e8\uc5b4\uc9c4 \uc139\uc158\uc774\ub984\uc740 \ubd88\uac00\ub2a5\ud574\uc694!","warning"),!1;if(0===e.trim().length)return r().fire("\uc800\uc7a5 \uc2e4\ud328","\ube48\uce78\uc73c\ub85c \uc800\uc7a5\ud560 \uc218 \uc5c6\uc5b4\uc694! \uc139\uc158\uc758 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.","warning"),!1;let t=[...q];if(t.includes(e))return r().fire("\uc800\uc7a5 \uc2e4\ud328","\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc139\uc158\uc774\ub984\uc785\ub2c8\ub2e4! \ud655\uc778\ud574\uc8fc\uc138\uc694!","warning"),!1;if($){var a;let l=null===(a=[...B])||void 0===a?void 0:a.map((t=>{let a;return a=t.grid!==$?t:{...t,grid:e},a})),s=t.indexOf($);t.splice(s,1,e),R(t),O(l),g(l,t),G(!1),ae("")}else t.push(e),R(t),g(B,t)},delSectionHandler:e=>{r().fire({icon:"warning",title:"\uc139\uc158\uc744 \uc0ad\uc81c\ud560\uae4c\uc694?",text:"".concat(e," \uc81c\ubaa9\uc758 \uc139\uc158\uc744 \uc0ad\uc81c\ud560\uae4c\uc694? *(\uc8fc\uc758)* \uc0ad\uc81c\ud560 \uacbd\uc6b0 \uc139\uc158\uc5d0 \ud3ec\ud568\ub41c \ubaa8\ub4e0 \ub370\uc774\ud130\ub3c4 \ud568\uaed8 \uc0ad\uc81c\ub429\ub2c8\ub2e4."),confirmButtonText:"\ud655\uc778",showDenyButton:!0,denyButtonText:"\ucde8\uc18c",confirmButtonColor:"#85bd82"}).then((t=>{if(t.isConfirmed){var a,l,s;let t=null===(a=[...B])||void 0===a?void 0:a.filter((t=>t.grid!==e));t=null===(l=t)||void 0===l?void 0:l.map(((e,t)=>({...e,id:String(t)})));let i=null===(s=[...q])||void 0===s?void 0:s.filter((t=>t!==e));O(t),g(t,i),G(!1)}}))},existName:$})})}),ue&&(0,X.jsx)(Q.Z,{onClose:()=>me(!1),children:(0,X.jsx)(ne.Z,{students:y,onClose:()=>{localStorage.setItem("itemId","null"),me(!1)},saveItemHandler:(e,t)=>{(async(e,t)=>{console.log(e),console.log(t);const a=async a=>{"sameTitle"!==a||t||r().fire({icon:"warning",title:"\ub3d9\uc77c\ud55c \uc81c\ubaa9 \uc874\uc7ac",text:"\uae30\uc874 \uc790\ub8cc\uc5d0 \ub3d9\uc77c\ud55c \uc81c\ubaa9\uc758 \uc790\ub8cc\uac00 \uc874\uc7ac\ud569\ub2c8\ub2e4. \uacc4\uc18d \uc800\uc7a5 \ud558\uc2dc\uaca0\uc5b4\uc694?",confirmButtonText:"\ud655\uc778",showDenyButton:!0,denyButtonText:"\ucde8\uc18c",confirmButtonColor:"#85bd82"}).then((e=>{e.isConfirmed&&s(),e.isDenied}));const s=async()=>{let t;if((null===l||void 0===l?void 0:l.length)>0){t={...e,yearGroup:be()};let a,s=[...l];s.forEach(((e,l)=>{e.id===t.id&&(a=l)})),void 0===a?s.push(t):(null!==e&&void 0!==e&&e.new_id&&(t={...t,id:e.new_id},delete t.new_id),s[a]=t),s=s.filter((e=>null!==e.id&&"null"!==e.id)),await(0,i.pl)(n,{checkLists_data:[...s]}),xe(e),pe([...s])}else{let t={...e,yearGroup:be()};await(0,i.pl)(n,{checkLists_data:[t]}),xe(e),pe([t])}};("new"===a||t)&&s()};let l=he,n=(0,i.JU)(s.wO,"checkLists",w),d=/ /gi,o=null===l||void 0===l?void 0:l.filter((t=>t.title.replace(d,"")===e.title.replace(d,"")&&t.id!==e.id)),c=null===l||void 0===l?void 0:l.filter((t=>t.title.replace(d,"")===e.title.replace(d,"")&&t.id===e.id));(null===o||void 0===o?void 0:o.length)>0&&0===(null===c||void 0===c?void 0:c.length)?a("sameTitle"):a("new")})(e,t),t||me(!1)},unSubmitStudents:ve.unSubmitStudents,item:ve,removeData:async e=>{var t;let a,l=(0,i.JU)(s.wO,"checkLists",w);const n=await(0,i.QT)(l),d=null===n||void 0===n||null===(t=n.data())||void 0===t?void 0:t.checkLists_data;a=null===d||void 0===d?void 0:d.filter((t=>t.id!==e.id)),await(0,i.pl)((0,i.JU)(s.wO,"checkLists",w),{checkLists_data:a})},setItemNull:()=>{},isSubject:!1,clName:""})}),(0,X.jsxs)("div",{className:h,children:[f&&""!==w&&(0,X.jsx)("div",{children:(0,X.jsxs)("span",{className:P,onClick:()=>me((e=>!e)),style:{fontSize:"1rem"},children:[(0,X.jsx)(V.XhF,{}),"\xa0 \uc81c\ucd9cox \ubcf4\uae30"]})}),(0,X.jsxs)("div",{children:[(0,X.jsx)("span",{className:P,onClick:()=>I((e=>!e)),style:{fontSize:"1rem"},children:C?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(V.wNu,{}),"\xa0 \uc139\uc158\uc2a4\ud0c0\uc77c"]}):(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(V.c09,{}),"\xa0 \uae30\ubcf8\uc2a4\ud0c0\uc77c"]})}),(0,X.jsxs)("span",{className:P,onClick:p,style:{fontSize:"1rem"},children:[(0,X.jsx)(V.Bjt,{})," \ub4a4\ub85c"]})]})]}),(0,X.jsx)("h1",{className:_,children:null===x||void 0===x?void 0:x.slice(10)}),0===B.length&&(0,X.jsxs)("div",{style:{marginTop:"20vh",color:"gray"},children:[(0,X.jsx)("p",{children:"\uc790\ub8cc\uac00 \uc5c6\uc5b4\uc694!"})," ",(0,X.jsx)("br",{}),(0,X.jsx)("p",{children:' \uc624\ub978\ucabd \uc544\ub798\uc758 "+" \ubc84\ud2bc\uc744 \ub20c\ub7ec\uc11c '}),(0,X.jsx)("br",{}),(0,X.jsx)("p",{children:"\uc790\ub8cc\ub97c \ucd94\uac00\ud574\uc8fc\uc138\uc694."})]}),C&&(0,X.jsxs)(re.LB,{sensors:D,collisionDetection:re.pE,onDragStart:ye,onDragEnd:we,onDragCancel:Ne,children:[(0,X.jsx)(te.Fo,{items:B,strategy:te.U2,children:(0,X.jsx)(ie,{columns:Math.floor(T/280),children:null===B||void 0===B?void 0:B.map((e=>(0,X.jsx)(se,{id:e.id,isTeacher:f,color:e.bgColor,data:e},e.id)))})}),(0,X.jsx)(re.y9,{adjustScale:!0,style:{transformOrigin:"0 0 "},children:J&&k&&(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(le,{id:k,color:{backgroundColor:null===B||void 0===B||null===(t=B.filter((e=>e.id===k)))||void 0===t||null===(a=t[0])||void 0===a?void 0:a.bgColor},data:null===B||void 0===B||null===(n=B.filter((e=>e.id===k)))||void 0===n?void 0:n[0],isTeacher:f,isDragging:!0})})})]}),!C&&(0,X.jsxs)(re.LB,{sensors:D,collisionDetection:re.pE,onDragStart:ye,onDragEnd:we,onDragCancel:Ne,onDragMove:e=>{var t;const{active:a,over:l}=e;if(l&&null!==l&&void 0!==l&&null!==(t=l.data)&&void 0!==t&&t.current){var s,i,n,d;!(null!==l&&void 0!==l&&null!==(s=l.data)&&void 0!==s&&null!==(i=s.current)&&void 0!==i&&null!==(n=i.sortable)&&void 0!==n&&null!==(d=n.items)&&void 0!==d&&d.includes(a.id))?isNaN(+l.id)?W(l.id):B.forEach((e=>{e.id===l.id&&W(e.grid)})):W(null)}F(e.active.id)},children:[(0,X.jsxs)("div",{className:m,children:[null===q||void 0===q?void 0:q.map((e=>{var t;let a=null===B||void 0===B?void 0:B.filter((t=>t.grid===e));return 0===a.length&&(a=[{id:e,grid:e,bgColor:"",text:"",title:"",userInfo:"",createdAt:""}]),(0,X.jsx)(te.Fo,{items:a,strategy:te.U2,onDragOver:()=>{W(e)},children:(0,X.jsxs)(ie,{columns:1,"data-droppable-id":e,children:[(0,X.jsx)("div",{className:L,onClick:()=>{ae(e),G(!0)},children:e}),null===(t=a)||void 0===t?void 0:t.map((e=>(0,X.jsx)(se,{id:e.id,isTeacher:f,color:e.bgColor,data:e},e.id)))]})},e)})),f&&(0,X.jsx)("div",{className:L,style:{margin:"40px 20px 0 0",width:"30%",maxWidth:"80px"},onClick:()=>G(!0),children:"+"})]}),(0,X.jsx)(re.y9,{adjustScale:!0,style:{transformOrigin:"0 0 "},children:J&&k&&(0,X.jsx)(X.Fragment,{children:(0,X.jsx)(le,{id:k,color:{backgroundColor:null===B||void 0===B||null===(d=B.filter((e=>e.id===k)))||void 0===d||null===(o=d[0])||void 0===o?void 0:o.bgColor},data:null===B||void 0===B||null===(u=B.filter((e=>e.id===k)))||void 0===u?void 0:u[0],isTeacher:f,isDragging:!0})})})]}),(0,X.jsx)("div",{children:(0,X.jsxs)("button",{className:U,onClick:()=>{E&&A(!1),S(!0)},children:[" ","+"," "]})})]})},me=e=>{var t;const[a,d]=(0,l.useState)([]),[o,c]=(0,l.useState)([]),[m,x]=(0,l.useState)(""),[h,f]=(0,l.useState)(""),[j,g]=(0,l.useState)(!1),[y,_]=(0,l.useState)(!1),[F,U]=(0,l.useState)(""),[P,H]=(0,l.useState)(e.students||[]),[B,O]=(0,l.useState)(""),E=t=>{r().fire({icon:"warning",title:"\ud328\ub4dc \uc0ad\uc81c",text:"\ud328\ub4dc\uc640 \uad00\ub828 \ub370\uc774\ud130(\uc5c5\ub85c\ub4dc\ud55c \uc0ac\uc9c4, \uae00 \ub4f1)\ub97c \uc815\ub9d0 \uc0ad\uc81c\ud560\uae4c\uc694?",confirmButtonText:"\uc0ad\uc81c",showDenyButton:!0,denyButtonText:"\ucde8\uc18c",confirmButtonColor:"#85bd82"}).then((a=>{a.isConfirmed&&((async e=>{var t,a;const l=(0,i.JU)(s.wO,"padIt","roomNames"),n=null===(t=(await(0,i.QT)(l)).data())||void 0===t||null===(a=t.datas)||void 0===a?void 0:a.filter((t=>t!==e));await(0,i.pl)(l,{datas:n})})(t),(async t=>{var a,l;const n=(0,i.JU)(s.wO,"padIt",e.userUid),d=null===(a=(await(0,i.QT)(n)).data())||void 0===a||null===(l=a.datas)||void 0===l?void 0:l.filter((e=>e!==t));await(0,i.pl)(n,{datas:d})})(t),(async e=>{var t,a;const l=(0,i.JU)(s.wO,"padIt",e);null===(t=(await(0,i.QT)(l)).data())||void 0===t||null===(a=t.datas)||void 0===a||a.forEach((async e=>{null!==e&&void 0!==e&&e.fileUrl&&""!==(null===e||void 0===e?void 0:e.fileUrl)&&await(0,de.oq)((0,de.iH)(s.Hw,null===e||void 0===e?void 0:e.fileUrl))})),await(0,i.oe)(l)})(t))}))};return(0,X.jsxs)("div",{children:[y&&(0,X.jsx)(Q.Z,{onClose:()=>_(!1),children:(0,X.jsxs)("div",{className:p,children:[(0,X.jsx)("h2",{className:"".concat(N," ").concat(S),children:null===m||void 0===m?void 0:m.slice(10)}),(0,X.jsx)(n.tv,{value:"https://checks-cho-ok.firebaseapp.com/padIt/".concat(m,"/").concat(h),size:"33vw",bgColor:"#ffffff",fgColor:"#000000",level:"L",includeMargin:!0}),(0,X.jsxs)("p",{className:"".concat(S," ").concat(C),style:{marginTop:"-10px"},children:[(0,X.jsx)("span",{children:"\ud83d\ude42 \ubc29\uc774\ub984"}),(0,X.jsx)("span",{children:m})]}),(0,X.jsxs)("p",{className:C,children:[(0,X.jsx)("span",{children:"\ud83d\ude42 \ube44\ubc00\ubc88\ud638"}),(0,X.jsx)("span",{children:h})]})]})}),!j&&(0,X.jsx)(X.Fragment,{children:(0,X.jsx)("ul",{className:"".concat(T," ").concat(v),children:null===(t=e.roomNames)||void 0===t?void 0:t.map(((t,a)=>(0,X.jsx)("li",{className:k,children:(0,X.jsxs)("div",{className:p,children:[(0,X.jsx)("span",{className:b,children:t.slice(10)}),(0,X.jsx)("span",{className:A,children:(0,X.jsx)(u,{date:t.slice(0,10)})}),(0,X.jsx)("button",{onClick:()=>E(t),className:D,children:"\uc0ad\uc81c"}),(0,X.jsx)("hr",{style:{width:"90%",margin:"20px 5px"}}),(0,X.jsxs)("div",{className:w,children:[(0,X.jsx)("button",{onClick:()=>(async t=>{x(t),e.setPadNameHandler(t);let a=(0,i.JU)(s.wO,"padIt",t);(0,i.cf)(a,(t=>{var a,l,s,i,n,r;let o=null===t||void 0===t||null===(a=t.data())||void 0===a?void 0:a.clName;var u;o&&(U(o),e.nowItemClName(o),H(null===t||void 0===t||null===(u=t.data())||void 0===u?void 0:u.students)),d(null===t||void 0===t||null===(l=t.data())||void 0===l?void 0:l.datas),c(null===t||void 0===t||null===(s=t.data())||void 0===s?void 0:s.sectionNames),e.userUidHandler(null===t||void 0===t||null===(i=t.data())||void 0===i?void 0:i.userUid),O(null===t||void 0===t||null===(n=t.data())||void 0===n?void 0:n.userUid),g(!0),e.setPadPwHandler(null===t||void 0===t||null===(r=t.data())||void 0===r?void 0:r.pw),e.hidePadAdd(!0)}))})(t),className:I,children:"\uc785\uc7a5"}),(0,X.jsx)("button",{onClick:()=>{(async e=>{var t;let a=(0,i.JU)(s.wO,"padIt",e),l=null===(t=(await(0,i.QT)(a)).data())||void 0===t?void 0:t.pw;f(l),x(e),_(!0)})(t)},className:I,children:"qr\ucf54\ub4dc \ud655\uc778"})]})]})},a)))})}),j&&(0,X.jsx)(ue,{padName:m,padDatas:a,onClose:()=>{r().fire({icon:"warning",title:"\ubaa9\ub85d\uc73c\ub85c \uc774\ub3d9",text:"\ud328\ub4dc\uc787 \ubaa9\ub85d\uc73c\ub85c \uc774\ub3d9\ud558\uc2dc\uaca0\uc5b4\uc694?",confirmButtonText:"\ud655\uc778",showDenyButton:!0,denyButtonText:"\ucde8\uc18c",confirmButtonColor:"#85bd82"}).then((t=>{t.isConfirmed&&(g(!1),e.hidePadAdd(!1))}))},userUid:B,students:P,padSectionNames:o,isTeacher:e.isTeacher,padDatasHandler:(t,a)=>e.padDatasHandler(t,a),clName:F})]})},ve=e=>{var t;const[a,n]=(0,l.useState)(null),[d,o]=(0,l.useState)({}),[u,m]=(0,l.useState)([]),[v,x]=(0,l.useState)(!0),[h,j]=(0,l.useState)(""),y=(0,l.useRef)(),w=async(t,a,l)=>{let d=(0,i.JU)(s.wO,"padIt","roomNames"),r=c()().format("YYYY-MM-DD")+t;(0,i.cf)(d,(t=>{var s,i,d;if(m(null===t||void 0===t||null===(s=t.data())||void 0===s?void 0:s.datas),null!==t&&void 0!==t&&null!==(i=t.data())&&void 0!==i&&null!==(d=i.datas)&&void 0!==d&&d.includes(r))o({}),n(!0);else{let t={name:r,pw:a};e.isSubject&&(t.clName=l),o(t),n(!1)}}))};return(0,l.useEffect)((()=>{null!==a&&(!0===a?r().fire("\ucd94\uac00 \uc2e4\ud328","\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ubc29\uc774\ub984\uc785\ub2c8\ub2e4. \ubc29\uc774\ub984\uc744 \ubcc0\uacbd\ud574\uc8fc\uc138\uc694.","warning"):!1===a&&((async()=>{var t,a,l;let n=[...u];n.push(d.name),await(0,i.r7)((0,i.JU)(s.wO,"padIt","roomNames"),{datas:n});let r=e.isSubject?null===(t=Object.values(null===(a=e.students)||void 0===a||null===(l=a.filter((e=>Object.keys(e)[0]===h)))||void 0===l?void 0:l[0]))||void 0===t?void 0:t[0]:e.students,o={datas:[],pw:d.pw,sectionNames:["0"],userUid:v?e.userUid:"",students:v?r:[]};e.isSubject&&(o.clName=h),await(0,i.pl)((0,i.JU)(s.wO,"padIt",d.name),o);let c=[...e.roomNames]||[];c.push(d.name),await(0,i.pl)((0,i.JU)(s.wO,"padIt",e.userUid),{datas:c})})(),e.onClose()))}),[a]),(0,X.jsx)(X.Fragment,{children:(0,X.jsxs)("div",{children:[e.isTeacher&&(0,X.jsx)("span",{className:P,style:{display:"flex",justifyContent:"flex-end"},onClick:()=>{e.onClose()},children:(0,X.jsx)(V.zu6,{})}),(0,X.jsx)("p",{className:_,style:{textAlign:"center"},children:e.isTeacher?"\ud328\ub4dc\uc787 \ucd94\uac00":"\uc218\ub3d9\uc73c\ub85c \uc811\uc18d\ud558\uae30"}),(0,X.jsxs)("form",{onSubmit:t=>{t.preventDefault();let a=t.target.roomName.value,l=t.target.roomPw.value;e.isSubject&&""===t.target.option.value.trim()||""!==a.trim()&&""!==l.trim()&&(l.trim().length<8?e.isTeacher?r().fire("\uc800\uc7a5 \uc2e4\ud328","\ubb38\uc790\uc640 \uc22b\uc790\ub97c \ud3ec\ud568\ud574 8\uc790\ub9ac \uc774\uc0c1\uc73c\ub85c \ub9cc\ub4e4\uc5b4\uc8fc\uc138\uc694.","warning"):r().fire("\uc811\uc18d \uc2e4\ud328","\ube44\ubc00\ubc88\ud638\uc758 \ubb38\uc790\uc640 \uc22b\uc790\ub97c \uc815\ud655\ud558\uac8c \uc785\ub825\ud574\uc8fc\uc138\uc694. \uc624\ub958\uac00 \ubc18\ubcf5\ub418\uba74 \uc120\uc0dd\ub2d8\uaed8 \ub3c4\uc6c0\uc744 \uc694\uccad\ud558\uc138\uc694.","warning"):e.isTeacher?e.isSubject?(w(a.trim(),l.trim(),t.target.option.value),j(t.target.option.value)):w(a.trim(),l.trim()):e.getPadDatasHandler(a.trim(),l.trim()))},className:p,children:[e.isTeacher&&e.isSubject&&(0,X.jsx)("div",{className:f,children:(0,X.jsxs)("select",{name:"option",defaultValue:"",className:M,required:!0,children:[(0,X.jsx)("option",{value:"",children:"-\ud559\uae09 \uc120\ud0dd-"}),null===(t=e.students)||void 0===t?void 0:t.map(((e,t)=>{var a,l;return(0,X.jsxs)("option",{value:null===(a=Object.keys(e))||void 0===a?void 0:a[0],children:[" ",null===(l=Object.keys(e))||void 0===l?void 0:l[0]]},t)}))]})}),(0,X.jsxs)("div",{className:f,children:[(0,X.jsx)("label",{name:"roomName",className:f,children:"\ubc29 \uc774\ub984"}),(0,X.jsx)("input",{type:"text",name:"roomName",required:!0,placeholder:e.isTeacher?"\uc811\uc18d\ud560 \ubc29\uc774\ub984":"\uc811\uc18d\ud560 \ubc29\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694.",className:g,autoFocus:!0,onKeyDown:e=>{" "===e.key&&(r().fire("\ub744\uc5b4\uc4f0\uae30 \ubd88\uac00","\ubc29\uc774\ub984\uc5d0 \ub744\uc5b4\uc4f0\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","warning"),e.preventDefault())}})]}),e.isTeacher&&(0,X.jsxs)("div",{className:f,style:{justifyContent:"center"},children:[" ","* (\ud559\uae09\uc758 \ubcc4\uce6d + \uc81c\ubaa9) \ud615\ud0dc \ucd94\ucc9c",e.isSubject&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("br",{}),"* \ubc29\uc774\ub984\uc5d0 (\ud559\uae09 \uba85)\uc744 \ucd94\uac00\ud558\uae30!!"]})]}),(0,X.jsxs)("div",{className:f,children:[(0,X.jsx)("label",{name:"roomPw",className:f,children:"\ube44\ubc00\ubc88\ud638"}),(0,X.jsx)("input",{type:"text",name:"roomPw",required:!0,placeholder:e.isTeacher?"8\uc790\ub9ac\uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694.":"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694.",className:g,onKeyDown:e=>{" "===e.key&&(r().fire("\ub744\uc5b4\uc4f0\uae30 \ubd88\uac00","\ube44\ubc00\ubc88\ud638\uc5d0 \ub744\uc5b4\uc4f0\uae30\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","warning"),e.preventDefault())}})]}),e.isTeacher&&(0,X.jsx)(X.Fragment,{children:(0,X.jsx)("div",{className:f,style:{justifyContent:"center"},children:(0,X.jsxs)("li",{className:Y,children:["* [\uc0dd\uae30\ubd80] - [\uc81c\ucd9cox] \uc5f0\ub3d9 \xa0\xa0",(0,X.jsx)("input",{type:"checkbox",id:"toggle",hidden:!0}),(0,X.jsx)("label",{htmlFor:"toggle",className:v?"".concat(J," ").concat(q):"".concat(J),onClick:()=>{x((e=>!e))},ref:y,children:(0,X.jsx)("span",{className:Z})})]})})}),(0,X.jsx)("div",{className:f,children:(0,X.jsx)("input",{type:"submit",value:e.isTeacher?"\ucd94\uac00\ud558\uae30":"\uc811\uc18d\ud558\uae30",style:{minWidth:"380px"},className:I})})]})]})})},xe=e=>{const[t,a]=(0,l.useState)(!1),[n,d]=(0,l.useState)([]),[o,u]=(0,l.useState)([]),[m,v]=(0,l.useState)(""),[x,h]=(0,l.useState)(""),[p,f]=(0,l.useState)(""),[j,g]=(0,l.useState)([]),[y,w]=(0,l.useState)(!1),[N,b]=(0,l.useState)(!1),[S,C]=(0,l.useState)(!0),[k,F]=(0,l.useState)([]),[D,U]=(0,l.useState)({}),[P,H]=(0,l.useState)(!1),[B,E]=(0,l.useState)(""),[A,L]=(0,l.useState)(!1);(0,l.useEffect)((()=>{e.userUid&&a(!0)}),[e.userUid]),(0,l.useEffect)((()=>{var t,a,l;let s=M();H(null===(t=e.isSubject)||void 0===t||null===(a=t.filter((e=>Object.keys(e)[0]===s)))||void 0===a||null===(l=a[0])||void 0===l?void 0:l[s])}),[e.isSubject]);(0,l.useEffect)((()=>{t&&(async()=>{let t=(0,i.JU)(s.wO,"padIt",e.userUid);(0,i.cf)(t,(e=>{var t;e.exists()&&g(null===(t=e.data())||void 0===t?void 0:t.datas)}))})()}),[t]),(0,l.useEffect)((()=>{if(e.students){var t,a,l;let s=M(),i=null===(t=e.students)||void 0===t||null===(a=t.filter((e=>Object.keys(e)[0]===s)))||void 0===a||null===(l=a[0])||void 0===l?void 0:l[s];F(i)}}),[e.students]);const M=()=>c()().format("MM-DD")<="02-15"?String(+c()().format("YYYY")-1):c()().format("YYYY"),Y=()=>{r().fire("\uc811\uc18d \uc2e4\ud328","\ubc29\uc774\ub984\uacfc \ube44\ubc00\ubc88\ud638\ub97c \ud655\uc778\ud558\uace0, \ub2e4\uc2dc \uc811\uc18d\ud574\uc8fc\uc138\uc694!","warning")},J=async(e,t)=>{let a=(0,i.JU)(s.wO,"padIt",e),l=await(0,i.QT)(a);if(document.querySelector("nav").style.display="none",l.exists()){var n;if((null===l||void 0===l||null===(n=l.data())||void 0===n?void 0:n.pw)!==t)return Y(),!1;r().fire("\uc811\uc18d \uc131\uacf5","".concat(e," \uc5d0 \uc811\uc18d\uc774 \uc131\uacf5\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc624\ub978\ucabd \ud558\ub2e8\uc758 + \ubc84\ud2bc\uc73c\ub85c \uba54\ubaa8\ub97c \ucd94\uac00\ud574\ubcf4\uc138\uc694."),"success"),v(e),h(t),(0,i.cf)(a,(e=>{var t,a,l,s,i;d(null===e||void 0===e||null===(t=e.data())||void 0===t?void 0:t.datas),u(null===e||void 0===e||null===(a=e.data())||void 0===a?void 0:a.sectionNames),E(null===e||void 0===e||null===(l=e.data())||void 0===l?void 0:l.clName),F([...null===e||void 0===e||null===(s=e.data())||void 0===s?void 0:s.students]),f(null===e||void 0===e||null===(i=e.data())||void 0===i?void 0:i.userUid)})),C(!1)}else Y()};(0,l.useEffect)((()=>{var t,a;if(!e.padItInfo)return;if(null!==(t=Object.values(e.padItInfo))&&void 0!==t&&t.includes("undefined")||null!==(a=Object.values(e.padItInfo))&&void 0!==a&&a.includes(void 0))return;let l=e.padItInfo.roomName,s=e.padItInfo.roomPw;J(l,s)}),[e.padItInfo]);(0,l.useEffect)((()=>{D.uid&&D.data&&(async(e,t)=>{await(0,i.pl)((0,i.JU)(s.wO,"checkLists",e),{checkLists_data:t})})(D.uid,D.data)}),[D]);const Z=async(e,a)=>{let l=(0,i.JU)(s.wO,"padIt",m),n={datas:e,pw:x,sectionNames:a,userUid:p,students:p?k:[]};var d,r;B&&(n.clName=B,""!==p&&(n.students=t?null===(d=Object.values(null===k||void 0===k||null===(r=k.filter((e=>Object.keys(e)[0]===B)))||void 0===r?void 0:r[0]))||void 0===d?void 0:d[0]:k));await(0,i.pl)(l,n),""!==p&&(async(e,t)=>{var a,l,n;let d=(0,i.JU)(s.wO,"checkLists",e),r=await(0,i.QT)(d),o=[...null===r||void 0===r||null===(a=r.data())||void 0===a?void 0:a.checkLists_data]||[],u={},v=0;null===o||void 0===o||o.forEach(((e,t)=>{(null===e||void 0===e?void 0:e.title)===m&&(v=t,u=e)}));let x,h=[],p=null===t||void 0===t?void 0:t.map((e=>null===e||void 0===e?void 0:e.title)),f=P?null===(l=Object.values(null===k||void 0===k||null===(n=k.filter((e=>Object.keys(e)[0]===B)))||void 0===n?void 0:n[0]))||void 0===l?void 0:l[0]:k;null===f||void 0===f||f.forEach((e=>{let t=!1;p.forEach((a=>{a.includes(e.name)&&(t=!0)})),t||h.push(e)})),0===v?(x={id:m.slice(0,10)+c()().format(" HH:mm:ss"),title:m,unSubmitStudents:h,yearGroup:M()},B&&(x.clName=B),o.push(x)):(x={id:u.id,title:u.title,unSubmitStudents:h,yearGroup:M()},B&&(x.clName=B),o.splice(v,1,x)),U({uid:e,data:o})})(p,e)},q=(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("h2",{onClick:()=>L((e=>!e)),children:[" ","\ud83d\ude2e \uc0ac\uc6a9 \ubc29\ubc95 \ubc0f \uc8fc\uc758\uc0ac\ud56d"," ",(0,X.jsxs)("span",{children:[A?(0,X.jsx)(V.s$2,{}):(0,X.jsx)(V.RiI,{})," "]})]}),(0,X.jsxs)("div",{className:A?z:W,children:[t&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("p",{className:T,style:{width:"90%"},children:[(0,X.jsx)("p",{className:O,children:"\ud83d\udc49 \ud328\ub4dc \ucd94\uac00\ud558\uae30 "}),"\uc811\uc18d\ud560 \ubc29\uc774\ub984\uacfc \ube44\ubc00\ubc88\ud638 (\uc804\ub2f4\uc740 \ud559\uae09\ub3c4 \uc120\ud0dd)\ub97c \uc124\uc815\ud574\uc8fc\uc138\uc694.",(0,X.jsx)("br",{}),"* \uc8fc\uc758 * \uc804\ub2f4\uc758 \uacbd\uc6b0, \ubc29\uc774\ub984\uc5d0 \ud559\uae09\uba85\uc744 \ub123\uc5b4\uc8fc\uc154\uc57c \ud328\ub4dc\ub9ac\uc2a4\ud2b8\uc5d0\uc11c \uad6c\ubd84\uc774 \ud3b8\ub9ac\ud569\ub2c8\ub2e4!"]}),(0,X.jsxs)("p",{className:T,style:{width:"90%"},children:[(0,X.jsx)("p",{className:O,children:"\ud83d\udc49 \uc0dd\uae30\ubd80 - \uc81c\ucd9cox \uc5f0\ub3d9?"}),"\uc5f0\ub3d9\uc744 \uc124\uc815\ud558\uc5ec \ud328\ub4dc\ub97c \ub9cc\ub4e0 \uacbd\uc6b0, \ud559\uc0dd\ub4e4\uc774 \uc81c\ubaa9\uc5d0 \uc131\uc744 \ud3ec\ud568\ud55c \uc804\uccb4\uc774\ub984\uc744 \uc801\uc5b4\uc11c \uc790\ub8cc\ub97c \uc62c\ub9b4 \uacbd\uc6b0, \uc790\ub3d9\uc73c\ub85c [\uc0dd\uae30\ubd80] - [\uc81c\ucd9cox]\uc5d0 \uc790\ub8cc\uac00 \uc0dd\uc131, \uc218\uc815\ub429\ub2c8\ub2e4!"]}),(0,X.jsxs)("p",{className:T,style:{width:"90%"},children:[(0,X.jsx)("p",{className:O,children:"\ud83d\udc49 \ud559\uc0dd \uc811\uc18d\ubc29\ubc95"}),"1. qr\ucf54\ub4dc \uc811\uc18d - \uad50\uc0ac\uac00 \ub9cc\ub4e0 \ubc29\uc758 qr\ucf54\ub4dc \ud655\uc778\uc744 \ub204\ub974\uba74 \ub098\uc624\ub294, qr\ucf54\ub4dc\ub97c \ud0dc\ube14\ub9bf, \ud639\uc740 \ud578\ub4dc\ud3f0 \uce74\uba54\ub77c\ub85c \uc778\uc2dd\ud558\uc5ec \uc811\uc18d\ud558\uc5ec \uc0ac\uc6a9\ud569\ub2c8\ub2e4. ",(0,X.jsx)("br",{}),"2. \uc218\ub3d9\uc811\uc18d - qr\ucf54\ub4dc \ud655\uc778\uc5d0 \uc788\ub294 \ubc29\uc774\ub984(\ub0a0\uc9dc\ub97c \ud3ec\ud568\ud55c!!)\uacfc \ube44\ubc00\ubc88\ud638\ub97c \ud559\uc0dd\uc774 \uc9c1\uc811 \uc785\ub825\ud558\uc5ec \uc811\uc18d\ud569\ub2c8\ub2e4."]})]}),!t&&(0,X.jsxs)("p",{className:T,style:{width:"90%"},children:[(0,X.jsx)("p",{className:O,children:"\ud83d\udc49 \uc218\ub3d9\uc811\uc18d \ubc29\ubc95"}),"\uc120\uc0dd\ub2d8\uc5d0\uac8c \ubc29\uc774\ub984\uacfc \ube44\ubc00\ubc88\ud638\ub97c \ubb3c\uc5b4\ubcf4\uace0 \uadf8\ub300\ub85c \uc785\ub825\ud558\uc5ec \uc811\uc18d\ud569\ub2c8\ub2e4."]}),(0,X.jsxs)("p",{className:T,style:{width:"90%"},children:[(0,X.jsx)("p",{className:O,children:"\ud83d\udc49 \uc790\ub8cc \uc2a4\ud0c0\uc77c (\uae30\ubcf8? \uc139\uc158?)"}),"1. \uae30\ubcf8\uc2a4\ud0c0\uc77c - \uce60\ud310\uc5d0 \ud3ec\uc2a4\ud2b8\uc787\uc744 \ubd99\uc778 \ud615\ud0dc\ub85c \uc790\ub8cc\uac00 \uc790\ub3d9\uc73c\ub85c \uc815\ub82c\ub429\ub2c8\ub2e4. ",(0,X.jsx)("br",{}),"2. \uc139\uc158\uc2a4\ud0c0\uc77c - \uc120\uc0dd\ub2d8\uc774 \ubbf8\ub9ac \ub9cc\ub4e4\uc5b4\ub454 \ucc2c\uc131, \ubc18\ub300\uc640 \uac19\uc740 \uc139\uc158\ubcc4\ub85c \uc790\ub8cc\ub97c \uc815\ub82c\ud569\ub2c8\ub2e4."]}),(0,X.jsxs)("p",{className:T,style:{width:"90%"},children:[(0,X.jsx)("p",{className:O,children:"\ud83d\udc49 \uc790\ub8cc \uc138\ubd80 \ub0b4\uc6a9 \ud655\uc778"}),"\uc790\ub8cc\ub97c \uc9e7\uac8c \ud074\ub9ad\ud558\uba74 \uc138\ubd80 \ub0b4\uc6a9\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.",(0,X.jsx)("br",{})," * \ub0b4\uac00 \uc4f4 \uc790\ub8cc / \uc120\uc0dd\ub2d8\uc740 \uc790\ub8cc\uc758 \ub0b4\uc6a9\uc744 \uc218\uc815, \uc0ad\uc81c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),(0,X.jsxs)("p",{className:T,style:{width:"90%"},children:[(0,X.jsx)("p",{className:O,children:"\ud83d\udc49 \uc790\ub8cc \uc21c\uc11c \ubc14\uafb8\uae30(\uc774\ub3d9)"}),"\uc790\ub8cc\ub97c \uae38\uac8c \ud074\ub9ad\ud558\uc5ec \ub4dc\ub798\uadf8\ud558\uba74 \uc790\ub8cc\uac00 \ubcf4\uc774\ub294 \uc21c\uc11c\ub97c \ubcc0\uacbd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4!",(0,X.jsx)("br",{}),"(\ub0b4\uac00 \uc4f4 \uc790\ub8cc\ub9cc / \uc120\uc0dd\ub2d8\uc740 \ubaa8\ub450 \uac00\ub2a5)"]})]})]});return(0,X.jsxs)(X.Fragment,{children:[t?(0,X.jsxs)("div",{style:{marginTop:"-80px"},children:[y&&(0,X.jsx)(Q.Z,{onClose:()=>w(!1),children:(0,X.jsx)(ve,{onClose:()=>w(!1),userUid:e.userUid,roomNames:j,isTeacher:t,students:k,isSubject:P})}),!N&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("h2",{className:_,style:{marginLeft:"43px"},children:[" ","\ud328\ub4dc\uc787 \ud83d\udccc"]}),(0,X.jsxs)("p",{children:["* \uc758\uacac \uc801\uae30 / \uc0ac\uc774\ud2b8 \uc8fc\uc18c / \uc0ac\uc9c4 \uc5c5\ub85c\ub4dc / \uac00\ub2a5",(0,X.jsx)("br",{}),"* \uacfc\uc81c \uc81c\ucd9c / \ucc2c\ubc18\ud1a0\ub860 / \ud1a0\uc758 / \ud559\uae09\ud68c\uc758\uc548\uac74 / \uc0c1\ud638\ud3c9\uac00 / \ub4f1\uc73c\ub85c \ud65c\uc6a9 \uac00\ub2a5"]}),(0,X.jsx)("button",{onClick:()=>w(!0),className:I,children:"\ud328\ub4dc \ucd94\uac00\ud558\uae30"})]}),(0,X.jsx)(me,{roomNames:j,hidePadAdd:e=>b(e),isTeacher:t,userUid:e.userUid,padDatasHandler:Z,userUidHandler:e=>{f(e)},students:k,setPadPwHandler:e=>h(e),setPadNameHandler:e=>v(e),nowItemClName:e=>E(e)})]}):(0,X.jsxs)(X.Fragment,{children:[S&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsxs)("h2",{className:_,style:{marginLeft:"43px"},children:[" ","\ud328\ub4dc\uc787 \ud83d\udccc"]}),(0,X.jsx)("p",{children:"\uac1c\ubc1c\uc911\uc785\ub2c8\ub2e4. \ud604\uc7ac\ub294 \uc791\uc131\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4."}),(0,X.jsx)(ve,{onClose:()=>C(!1),isTeacher:t,getPadDatasHandler:J})]}),!S&&(0,X.jsx)(ue,{padName:m,padDatas:n,userUid:e.userUid,padSectionNames:o,onClose:()=>{r().fire({icon:"warning",title:"\uc218\ub3d9 \uc785\ub825\uc73c\ub85c",text:"\ud328\ub4dc\uc787 \uc218\ub3d9 \uc785\ub825\ud654\uba74\uc73c\ub85c \uc774\ub3d9\ud560\uae4c\uc694? \uc774\ub3d9\ud558\uba74 \uc9c1\uc811 \ubc29\uc774\ub984\uacfc \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc57c \ud569\ub2c8\ub2e4!",confirmButtonText:"\ud655\uc778",showDenyButton:!0,denyButtonText:"\ucde8\uc18c",confirmButtonColor:"#85bd82"}).then((e=>{e.isConfirmed&&C(!0)}))},students:k,padDatasHandler:Z})]}),q]})}}}]);