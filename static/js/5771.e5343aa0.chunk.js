"use strict";(self.webpackChunkchecks_cool=self.webpackChunkchecks_cool||[]).push([[5771],{5771:(e,s,t)=>{t.r(s),t.d(s,{default:()=>S});var i=t(7313),l=t(650),a=t(573),n=t(7692);const r="Profile_explain-h3__o1J3z",o="Profile_loginEmail-p__9fIuM",c="Profile_userProfile-form__V3DYF",d="Profile_nickName-input__BxOgC",u="Profile_stateMessage-textarea__2jrPU",m="Profile_explain-p__VDdJx",h="Profile_checkLabel__97iXn",v="Profile_check-h3__6KrVp",f="Profile_checkLabel-checked__FRTOC",j="Profile_check-input__3m7Kx";var x=t(7114),b=t.n(x),k=t(658),p=t.n(k),g=t(8570),_=t(2050),N=t(6417);const S=e=>{var s,t,x,k,S;const[y,w]=(0,i.useState)({}),[O,Y]=(0,i.useState)({}),[M,P]=(0,i.useState)("");(0,i.useEffect)((()=>{(async()=>{let s=(0,a.JU)(l.wO,"user",e.user.uid);const t=await(0,a.QT)(s);var i,n,r;t.exists()&&(Y({...t.data()}),w({...t.data(),isSubject:null===(i=t.data())||void 0===i||null===(n=i.isSubject)||void 0===n||null===(r=n.filter((e=>Object.keys(e)[0]===D())))||void 0===r?void 0:r[0]}))})()}),[]);const D=()=>p()().format("MM-DD")<="02-15"?String(+p()().format("YYYY")-1):p()().format("YYYY"),B=(e,s,t)=>{b().fire({icon:e,title:s,html:t,confirmButtonText:"\ud655\uc778",confirmButtonColor:"#85bd82"})},C=async s=>{var t,i,n,r,o,c,d;s.preventDefault();let u,m=localStorage.getItem("profile"+p()().format("YY-MM-DD")+e.user.email);if(m>=2)return B("error","\uc800\uc7a5\ud69f\uc218 \ucd08\uacfc","\ud558\ub8e8\uc5d0 \ub450 \ubc88\ub9cc \ud504\ub85c\ud544 \uc218\uc815\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4. \ub0b4\uc77c \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694!"),!1;let h=!1,v=(0,a.JU)(l.wO,"user",e.user.uid);const f=await(0,a.QT)(v);if(f.exists()?u=f.data():(u={},h=!0),0===Object.values(y).length)return B("error","\uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694!","\uc785\ub825\ub41c \ub0b4\uc6a9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \ud655\uc778\ud574\uc8fc\uc138\uc694!"),!1;if(0===(null===(t=y.nickName)||void 0===t?void 0:t.trim().length))return B("error","\uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc5b4\uc694!","\ub2c9\ub124\uc784\uc740 \ud544\uc218 \uc785\ub825 \uc0ac\ud56d\uc785\ub2c8\ub2e4! \ud655\uc778\ud574\uc8fc\uc138\uc694."),!1;let j=(0,a.JU)(l.wO,"user","nickNames");let x=(await(0,a.QT)(j)).data().nickNames_data;const b=null===(i=u)||void 0===i?void 0:i.nickName;var k;h||(x=null===(k=x)||void 0===k?void 0:k.filter((e=>e!==b)));if((null===(n=x)||void 0===n?void 0:n.filter((e=>{var s;return e===(null===(s=y.nickName)||void 0===s?void 0:s.trim())}))).length>0)return B("error","\ub2c9\ub124\uc784 \uc911\ubcf5","\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ub2c9\ub124\uc784\uc785\ub2c8\ub2e4! \ub2e4\ub978 \uc774\ub984\uc73c\ub85c \ubcc0\uacbd\ud574\uc8fc\uc138\uc694!"),!1;B("success","\uc800\uc7a5\ub418\uc5c8\uc5b4\uc694!","\uc790\ub8cc\uac00 \uc218\uc815/\uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),y.isSubject||(y.isSubject={[D()]:!1});let g=[];null===(r=u)||void 0===r||null===(o=r.isSubject)||void 0===o||o.forEach((e=>{Object.keys(e)[0]!==Object.keys(y.isSubject)[0]&&g.push(e)})),void 0===g||0===(null===(c=g)||void 0===c?void 0:c.length)?g=[y.isSubject]:g.push(y.isSubject);let _=g,N={...y,isSubject:_};h?await(0,a.pl)(v,N):await(0,a.r7)(v,N),x.push(null===(d=y.nickName)||void 0===d?void 0:d.trim());const S=x;await(0,a.r7)(j,{nickNames_data:S}),e.profileHandler(),localStorage.setItem("profile"+p()().format("YY-MM-DD")+e.user.email,m+1)},I=(e,s)=>{"nickName"===s?w((s=>({...s,nickName:e.target.value}))):"stateMessage"===s?w((s=>({...s,stateMessage:e.target.value}))):e.target.checked?w((e=>({...e,isSubject:{[D()]:!0}}))):w((e=>({...e,isSubject:{[D()]:!1}})))};return(0,i.useEffect)((()=>{e.user.providerData.forEach((function(e){"password"===e.providerId&&"google.com"===e.providerId?P("email & Google\uc5f0\ub3d9"):"google.com"===e.providerId?P("Google\uc5f0\ub3d9"):"password"===e.providerId&&P("email")}))}),[]),(0,N.jsxs)("div",{children:[(0,N.jsxs)("form",{className:c,onSubmit:C,style:{marginTop:"30px"},children:[(0,N.jsx)("h3",{children:"\ub2c9\ub124\uc784"}),(0,N.jsx)("input",{onChange:e=>I(e,"nickName"),className:d,placeholder:"",type:"text",defaultValue:y.nickName||"",maxLength:12},"nickName"),(0,N.jsx)("h3",{children:"\uc0c1\ud0dc\uba54\uc138\uc9c0"}),(0,N.jsx)("textarea",{onChange:e=>I(e,"stateMessage"),className:u,defaultValue:y.stateMessage||"",maxLength:50}),(0,N.jsxs)("div",{children:[(0,N.jsxs)("h3",{className:v,children:[(0,N.jsxs)("label",{className:"".concat(h," ").concat((null===y||void 0===y||null===(s=y.isSubject)||void 0===s?void 0:s[D()])&&f),children:[(0,N.jsx)("input",{className:j,onChange:e=>I(e,"isSubject"),value:(null===y||void 0===y||null===(t=y.isSubject)||void 0===t?void 0:t[D()])||"",checked:!(null===y||void 0===y||null===(x=y.isSubject)||void 0===x||!x[D()]),type:"checkbox"},"isSub")," "]}),"\uc774\ubc88\ud559\ub144\ub3c4 \uc804\ub2f4\uad50\uc0ac"]}),0===Object.keys(O).length&&(0,N.jsxs)("h3",{className:r,children:[" ","* \ud504\ub85c\ud544\uc744 \uc785\ub825\ud558\uc2e0 \ud6c4\uc5d0 ",(0,N.jsx)("br",{})," \uc11c\ube44\uc2a4 \uc774\uc6a9\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4. ",(0,N.jsx)("br",{}),(0,N.jsx)("br",{}),"\ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc2dc\uace0 [\uc800\uc7a5]\ud574\uc8fc\uc138\uc694!"]}),0!==Object.keys(O).length&&0===(null===O||void 0===O||null===(k=O.isSubject)||void 0===k||null===(S=k.filter((e=>Object.keys(e)[0]===D())))||void 0===S?void 0:S.length)&&(0,N.jsxs)("h3",{className:r,children:[" ","* 2\uc6d4\ubd80\ud130 \uc0c8\ub85c\uc6b4 \ud559\ub144\ub3c4\ub85c \uc778\uc2dd\ub429\ub2c8\ub2e4. ",(0,N.jsx)("br",{}),"\uc774\ubc88\ud559\ub144\ub3c4 \uc804\ub2f4\uad50\uc0ac \uc5ec\ubd80\ub97c \ud655\uc778\ud558\uc2dc\uace0 ",(0,N.jsx)("br",{}),"[\uc800\uc7a5] \ud574\uc8fc\uc138\uc694!",(0,N.jsx)("br",{}),(0,N.jsx)("br",{}),"* \uc804\ub2f4\uc774 \uc544\ub2c8\uc2e0 \uacbd\uc6b0 \uadf8\ub0e5 [\uc800\uc7a5] \ud574\uc8fc\uc138\uc694!"]})]}),(0,N.jsx)(n.Z,{name:"\uc800\uc7a5",id:"userInfo-saveBtn",className:"add-event-button",style:{width:"73%"},onclick:C}),(0,N.jsx)("hr",{style:{width:"73%"}})]}),(0,N.jsxs)("div",{className:c,children:[(0,N.jsxs)("div",{className:v,children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("p",{className:o,children:"\ud604\uc7ac \ub85c\uadf8\uc778 \uc544\uc774\ub514"}),(0,N.jsx)("p",{className:o,children:e.user.email})]}),(0,N.jsx)("div",{children:(0,N.jsx)(n.Z,{name:M,className:"add-event-button",style:{fontSize:"1rem"},onclick:()=>b().fire("\uac00\uc785 & \ub85c\uadf8\uc778 \ubc29\uc2dd","".concat(M," \ubc29\uc2dd\uc744 \uc0ac\uc6a9\ud574\uc11c \uac00\uc785, \ub85c\uadf8\uc778 \ud558\uc2e0 \uc0c1\ud0dc\uc785\ub2c8\ub2e4."),"info")})}),(0,N.jsx)("div",{children:(0,N.jsx)(n.Z,{name:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd",id:"userInfo-saveBtn",className:"add-event-button",style:{fontSize:"1rem"},onclick:()=>{b().fire({icon:"question",title:"\uba54\uc77c \uc804\uc1a1",html:"\ube44\ubc00\ubc88\ud638 \ubcc0\uacbd(\uc7ac\uc124\uc815) \uba54\uc77c\uc744 \uc804\uc1a1\ud560\uae4c\uc694?",confirmButtonText:"\ud655\uc778",confirmButtonColor:"#85bd82",denyButtonText:"\ucde8\uc18c",showDenyButton:!0}).then((s=>{s.isConfirmed&&(0,g.LS)(l.ON,e.user.email).then((()=>{console.log("email sent"),b().fire("\uba54\uc77c\uc804\uc1a1 \uc644\ub8cc","\uc774\uba54\uc77c \uc8fc\uc18c ( ".concat(e.user.email," ) \ub85c \ube44\ubc00\ubc88\ud638 \uc7ac\uc124\uc815 \uba54\uc77c\uc774 \uc804\uc1a1\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),"success")}))}))}})})]}),(0,N.jsx)("hr",{style:{width:"73%"}})]}),(0,N.jsxs)("p",{className:m,style:{marginBottom:"50px"},children:["* \uba54\ub274\uc758 ",(0,N.jsx)(_.Xws,{}),' - "\ud504\ub85c\ud544 \uc218\uc815" \uc744 \ud1b5\ud574 \ud604\uc7ac \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\uc774 \uac00\ub2a5\ud569\ub2c8\ub2e4.'," "]})]})}}}]);